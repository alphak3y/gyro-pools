{"abi": [], "allSourcePaths": {"30": "node_modules/@balancer-labs/v2-pool-utils/contracts/oracle/Buffer.sol", "32": "node_modules/@balancer-labs/v2-pool-utils/contracts/oracle/QueryProcessor.sol", "33": "node_modules/@balancer-labs/v2-pool-utils/contracts/oracle/Samples.sol", "40": "node_modules/@balancer-labs/v2-solidity-utils/contracts/helpers/BalancerErrors.sol", "47": "node_modules/@balancer-labs/v2-solidity-utils/contracts/helpers/LogCompression.sol", "49": "node_modules/@balancer-labs/v2-solidity-utils/contracts/helpers/WordCodec.sol", "51": "node_modules/@balancer-labs/v2-solidity-utils/contracts/math/LogExpMath.sol"}, "ast": {"absolutePath": "node_modules/@balancer-labs/v2-pool-utils/contracts/oracle/QueryProcessor.sol", "exportedSymbols": {"Buffer": [15075], "Errors": [11426], "IPriceOracle": [20690], "LogCompression": [16817], "LogExpMath": [13202], "QueryProcessor": [21141], "Samples": [21538], "WordCodec": [17857], "_require": [11021], "_revert": [11029]}, "id": 21142, "license": "GPL-3.0-or-later", "nodeType": "SourceUnit", "nodes": [{"id": 20692, "literals": ["solidity", "^", "0.7", ".0"], "nodeType": "PragmaDirective", "src": "688:23:32"}, {"id": 20693, "literals": ["experimental", "ABIEncoderV2"], "nodeType": "PragmaDirective", "src": "712:33:32"}, {"absolutePath": "node_modules/@balancer-labs/v2-solidity-utils/contracts/helpers/BalancerErrors.sol", "file": "@balancer-labs/v2-solidity-utils/contracts/helpers/BalancerErrors.sol", "id": 20694, "nodeType": "ImportDirective", "scope": 21142, "sourceUnit": 11427, "src": "747:79:32", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "node_modules/@balancer-labs/v2-solidity-utils/contracts/helpers/LogCompression.sol", "file": "@balancer-labs/v2-solidity-utils/contracts/helpers/LogCompression.sol", "id": 20695, "nodeType": "ImportDirective", "scope": 21142, "sourceUnit": 16818, "src": "827:79:32", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "node_modules/@balancer-labs/v2-pool-utils/contracts/interfaces/IPriceOracle.sol", "file": "../interfaces/IPriceOracle.sol", "id": 20696, "nodeType": "ImportDirective", "scope": 21142, "sourceUnit": 20691, "src": "908:40:32", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "node_modules/@balancer-labs/v2-pool-utils/contracts/oracle/Buffer.sol", "file": "./Buffer.sol", "id": 20697, "nodeType": "ImportDirective", "scope": 21142, "sourceUnit": 15076, "src": "950:22:32", "symbolAliases": [], "unitAlias": ""}, {"absolutePath": "node_modules/@balancer-labs/v2-pool-utils/contracts/oracle/Samples.sol", "file": "./Samples.sol", "id": 20698, "nodeType": "ImportDirective", "scope": 21142, "sourceUnit": 21539, "src": "973:23:32", "symbolAliases": [], "unitAlias": ""}, {"abstract": false, "baseContracts": [], "contractDependencies": [], "contractKind": "library", "documentation": {"id": 20699, "nodeType": "StructuredDocumentation", "src": "998:380:32", "text": " @dev Auxiliary library for PoolPriceOracle, offloading most of the query code to reduce bytecode size by using this\n as a linked library. The downside is an extra DELEGATECALL is added (2600 gas as of the Berlin hardfork), but the\n bytecode size gains are so big (specially of the oracle contract does not use `LogCompression.fromLowResLog`) that\n it is worth it."}, "fullyImplemented": true, "id": 21141, "linearizedBaseContracts": [21141], "name": "QueryProcessor", "nodeType": "ContractDefinition", "nodes": [{"id": 20702, "libraryName": {"id": 20700, "name": "Buffer", "nodeType": "UserDefinedTypeName", "referencedDeclaration": 15075, "src": "1414:6:32", "typeDescriptions": {"typeIdentifier": "t_contract$_Buffer_$15075", "typeString": "library Buffer"}}, "nodeType": "UsingForDirective", "src": "1408:25:32", "typeName": {"id": 20701, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1425:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}}, {"id": 20705, "libraryName": {"id": 20703, "name": "Samples", "nodeType": "UserDefinedTypeName", "referencedDeclaration": 21538, "src": "1444:7:32", "typeDescriptions": {"typeIdentifier": "t_contract$_Samples_$21538", "typeString": "library Samples"}}, "nodeType": "UsingForDirective", "src": "1438:26:32", "typeName": {"id": 20704, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "1456:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}}, {"id": 20708, "libraryName": {"id": 20706, "name": "LogCompression", "nodeType": "UserDefinedTypeName", "referencedDeclaration": 16817, "src": "1475:14:32", "typeDescriptions": {"typeIdentifier": "t_contract$_LogCompression_$16817", "typeString": "library LogCompression"}}, "nodeType": "UsingForDirective", "src": "1469:32:32", "typeName": {"id": 20707, "name": "int256", "nodeType": "ElementaryTypeName", "src": "1494:6:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}}, {"body": {"id": 20750, "nodeType": "Block", "src": "1770:243:32", "statements": [{"assignments": [20723], "declarations": [{"constant": false, "id": 20723, "mutability": "mutable", "name": "sample", "nodeType": "VariableDeclaration", "scope": 20750, "src": "1780:14:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 20722, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "1780:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}], "id": 20727, "initialValue": {"baseExpression": {"id": 20724, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20713, "src": "1797:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, "id": 20726, "indexExpression": {"id": 20725, "name": "index", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20717, "src": "1805:5:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "nodeType": "IndexAccess", "src": "1797:14:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "nodeType": "VariableDeclarationStatement", "src": "1780:31:32"}, {"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20733, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 20729, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20723, "src": "1830:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20730, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "1830:16:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 20731, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1830:18:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "30", "id": 20732, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "1851:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "1830:22:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 20734, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11426, "src": "1854:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_Errors_$11426_$", "typeString": "type(library Errors)"}}, "id": 20735, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "ORACLE_NOT_INITIALIZED", "nodeType": "MemberAccess", "referencedDeclaration": 11149, "src": "1854:29:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20728, "name": "_require", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11021, "src": "1821:8:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bool_$_t_uint256_$returns$__$", "typeString": "function (bool,uint256) pure"}}, "id": 20736, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1821:63:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 20737, "nodeType": "ExpressionStatement", "src": "1821:63:32"}, {"assignments": [20739], "declarations": [{"constant": false, "id": 20739, "mutability": "mutable", "name": "rawInstantValue", "nodeType": "VariableDeclaration", "scope": 20750, "src": "1895:22:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}, "typeName": {"id": 20738, "name": "int256", "nodeType": "ElementaryTypeName", "src": "1895:6:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "visibility": "internal"}], "id": 20744, "initialValue": {"arguments": [{"id": 20742, "name": "variable", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20715, "src": "1935:8:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}], "expression": {"id": 20740, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20723, "src": "1920:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20741, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "instant", "nodeType": "MemberAccess", "referencedDeclaration": 21282, "src": "1920:14:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$_t_enum$_Variable_$20643_$returns$_t_int256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32,enum IPriceOracle.Variable) pure returns (int256)"}}, "id": 20743, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1920:24:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "VariableDeclarationStatement", "src": "1895:49:32"}, {"expression": {"arguments": [{"id": 20747, "name": "rawInstantValue", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20739, "src": "1990:15:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_int256", "typeString": "int256"}], "expression": {"id": 20745, "name": "LogCompression", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 16817, "src": "1961:14:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_LogCompression_$16817_$", "typeString": "type(library LogCompression)"}}, "id": 20746, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "fromLowResLog", "nodeType": "MemberAccess", "referencedDeclaration": 16816, "src": "1961:28:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_int256_$returns$_t_uint256_$", "typeString": "function (int256) pure returns (uint256)"}}, "id": 20748, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "1961:45:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "functionReturnParameters": 20721, "id": 20749, "nodeType": "Return", "src": "1954:52:32"}]}, "documentation": {"id": 20709, "nodeType": "StructuredDocumentation", "src": "1507:79:32", "text": " @dev Returns the value for `variable` at the indexed sample."}, "functionSelector": "0397bee0", "id": 20751, "implemented": true, "kind": "function", "modifiers": [], "name": "getInstantValue", "nodeType": "FunctionDefinition", "parameters": {"id": 20718, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 20713, "mutability": "mutable", "name": "samples", "nodeType": "VariableDeclaration", "scope": 20751, "src": "1625:43:32", "stateVariable": false, "storageLocation": "storage", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "typeName": {"id": 20712, "keyType": {"id": 20710, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1633:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Mapping", "src": "1625:27:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "valueType": {"id": 20711, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "1644:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}}, "visibility": "internal"}, {"constant": false, "id": 20715, "mutability": "mutable", "name": "variable", "nodeType": "VariableDeclaration", "scope": 20751, "src": "1678:30:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}, "typeName": {"id": 20714, "name": "IPriceOracle.Variable", "nodeType": "UserDefinedTypeName", "referencedDeclaration": 20643, "src": "1678:21:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}, "visibility": "internal"}, {"constant": false, "id": 20717, "mutability": "mutable", "name": "index", "nodeType": "VariableDeclaration", "scope": 20751, "src": "1718:13:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20716, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1718:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1615:122:32"}, "returnParameters": {"id": 20721, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 20720, "mutability": "mutable", "name": "", "nodeType": "VariableDeclaration", "scope": 20751, "src": "1761:7:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20719, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1761:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "1760:9:32"}, "scope": 21141, "src": "1591:422:32", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 20813, "nodeType": "Block", "src": "2319:387:32", "statements": [{"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20769, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"expression": {"id": 20766, "name": "query", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20758, "src": "2338:5:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery memory"}}, "id": 20767, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "secs", "nodeType": "MemberAccess", "referencedDeclaration": 20665, "src": "2338:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "!=", "rightExpression": {"hexValue": "30", "id": 20768, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "2352:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "2338:15:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 20770, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11426, "src": "2355:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_Errors_$11426_$", "typeString": "type(library Errors)"}}, "id": 20771, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "ORACLE_BAD_SECS", "nodeType": "MemberAccess", "referencedDeclaration": 11158, "src": "2355:22:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20765, "name": "_require", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11021, "src": "2329:8:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bool_$_t_uint256_$returns$__$", "typeString": "function (bool,uint256) pure"}}, "id": 20772, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "2329:49:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 20773, "nodeType": "ExpressionStatement", "src": "2329:49:32"}, {"assignments": [20775], "declarations": [{"constant": false, "id": 20775, "mutability": "mutable", "name": "beginAccumulator", "nodeType": "VariableDeclaration", "scope": 20813, "src": "2389:23:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}, "typeName": {"id": 20774, "name": "int256", "nodeType": "ElementaryTypeName", "src": "2389:6:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "visibility": "internal"}], "id": 20787, "initialValue": {"arguments": [{"id": 20777, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20756, "src": "2434:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, {"expression": {"id": 20778, "name": "query", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20758, "src": "2443:5:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery memory"}}, "id": 20779, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "variable", "nodeType": "MemberAccess", "referencedDeclaration": 20663, "src": "2443:14:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}, {"id": 20780, "name": "latestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20760, "src": "2459:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20785, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"expression": {"id": 20781, "name": "query", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20758, "src": "2472:5:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery memory"}}, "id": 20782, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "ago", "nodeType": "MemberAccess", "referencedDeclaration": 20667, "src": "2472:9:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"expression": {"id": 20783, "name": "query", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20758, "src": "2484:5:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery memory"}}, "id": 20784, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "secs", "nodeType": "MemberAccess", "referencedDeclaration": 20665, "src": "2484:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "2472:22:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20776, "name": "getPastAccumulator", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21023, "src": "2415:18:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_mapping$_t_uint256_$_t_bytes32_$_$_t_enum$_Variable_$20643_$_t_uint256_$_t_uint256_$returns$_t_int256_$", "typeString": "function (mapping(uint256 => bytes32),enum IPriceOracle.Variable,uint256,uint256) view returns (int256)"}}, "id": 20786, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "2415:80:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "VariableDeclarationStatement", "src": "2389:106:32"}, {"assignments": [20789], "declarations": [{"constant": false, "id": 20789, "mutability": "mutable", "name": "endAccumulator", "nodeType": "VariableDeclaration", "scope": 20813, "src": "2505:21:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}, "typeName": {"id": 20788, "name": "int256", "nodeType": "ElementaryTypeName", "src": "2505:6:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "visibility": "internal"}], "id": 20798, "initialValue": {"arguments": [{"id": 20791, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20756, "src": "2548:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, {"expression": {"id": 20792, "name": "query", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20758, "src": "2557:5:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery memory"}}, "id": 20793, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "variable", "nodeType": "MemberAccess", "referencedDeclaration": 20663, "src": "2557:14:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}, {"id": 20794, "name": "latestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20760, "src": "2573:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"expression": {"id": 20795, "name": "query", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20758, "src": "2586:5:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery memory"}}, "id": 20796, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "ago", "nodeType": "MemberAccess", "referencedDeclaration": 20667, "src": "2586:9:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20790, "name": "getPastAccumulator", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21023, "src": "2529:18:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_mapping$_t_uint256_$_t_bytes32_$_$_t_enum$_Variable_$20643_$_t_uint256_$_t_uint256_$returns$_t_int256_$", "typeString": "function (mapping(uint256 => bytes32),enum IPriceOracle.Variable,uint256,uint256) view returns (int256)"}}, "id": 20797, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "2529:67:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "VariableDeclarationStatement", "src": "2505:91:32"}, {"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 20810, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 20803, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20801, "name": "endAccumulator", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20789, "src": "2643:14:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"id": 20802, "name": "beginAccumulator", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20775, "src": "2660:16:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "2643:33:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}], "id": 20804, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "2642:35:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"arguments": [{"expression": {"id": 20807, "name": "query", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20758, "src": "2687:5:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery memory"}}, "id": 20808, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "memberName": "secs", "nodeType": "MemberAccess", "referencedDeclaration": 20665, "src": "2687:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20806, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "ElementaryTypeNameExpression", "src": "2680:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_int256_$", "typeString": "type(int256)"}, "typeName": {"id": 20805, "name": "int256", "nodeType": "ElementaryTypeName", "src": "2680:6:32", "typeDescriptions": {}}}, "id": 20809, "isConstant": false, "isLValue": false, "isPure": false, "kind": "typeConversion", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "2680:18:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "2642:56:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_int256", "typeString": "int256"}], "expression": {"id": 20799, "name": "LogCompression", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 16817, "src": "2613:14:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_LogCompression_$16817_$", "typeString": "type(library LogCompression)"}}, "id": 20800, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "fromLowResLog", "nodeType": "MemberAccess", "referencedDeclaration": 16816, "src": "2613:28:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_int256_$returns$_t_uint256_$", "typeString": "function (int256) pure returns (uint256)"}}, "id": 20811, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "2613:86:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "functionReturnParameters": 20764, "id": 20812, "nodeType": "Return", "src": "2606:93:32"}]}, "documentation": {"id": 20752, "nodeType": "StructuredDocumentation", "src": "2019:89:32", "text": " @dev Returns the time average weighted price corresponding to `query`."}, "functionSelector": "79eaef82", "id": 20814, "implemented": true, "kind": "function", "modifiers": [], "name": "getTimeWeightedAverage", "nodeType": "FunctionDefinition", "parameters": {"id": 20761, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 20756, "mutability": "mutable", "name": "samples", "nodeType": "VariableDeclaration", "scope": 20814, "src": "2154:43:32", "stateVariable": false, "storageLocation": "storage", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "typeName": {"id": 20755, "keyType": {"id": 20753, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2162:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Mapping", "src": "2154:27:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "valueType": {"id": 20754, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "2173:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}}, "visibility": "internal"}, {"constant": false, "id": 20758, "mutability": "mutable", "name": "query", "nodeType": "VariableDeclaration", "scope": 20814, "src": "2207:44:32", "stateVariable": false, "storageLocation": "memory", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_memory_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery"}, "typeName": {"id": 20757, "name": "IPriceOracle.OracleAverageQuery", "nodeType": "UserDefinedTypeName", "referencedDeclaration": 20668, "src": "2207:31:32", "typeDescriptions": {"typeIdentifier": "t_struct$_OracleAverageQuery_$20668_storage_ptr", "typeString": "struct IPriceOracle.OracleAverageQuery"}}, "visibility": "internal"}, {"constant": false, "id": 20760, "mutability": "mutable", "name": "latestIndex", "nodeType": "VariableDeclaration", "scope": 20814, "src": "2261:19:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20759, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2261:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "2144:142:32"}, "returnParameters": {"id": 20764, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 20763, "mutability": "mutable", "name": "", "nodeType": "VariableDeclaration", "scope": 20814, "src": "2310:7:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20762, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2310:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "2309:9:32"}, "scope": 21141, "src": "2113:593:32", "stateMutability": "view", "virtual": false, "visibility": "external"}, {"body": {"id": 21022, "nodeType": "Block", "src": "3902:3926:32", "statements": [{"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20834, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"expression": {"id": 20831, "name": "block", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": -4, "src": "4012:5:32", "typeDescriptions": {"typeIdentifier": "t_magic_block", "typeString": "block"}}, "id": 20832, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "src": "4012:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": {"id": 20833, "name": "ago", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20825, "src": "4031:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4012:22:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 20835, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11426, "src": "4036:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_Errors_$11426_$", "typeString": "type(library Errors)"}}, "id": 20836, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "ORACLE_INVALID_SECONDS_QUERY", "nodeType": "MemberAccess", "referencedDeclaration": 11146, "src": "4036:35:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20830, "name": "_require", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11021, "src": "4003:8:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bool_$_t_uint256_$returns$__$", "typeString": "function (bool,uint256) pure"}}, "id": 20837, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4003:69:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 20838, "nodeType": "ExpressionStatement", "src": "4003:69:32"}, {"assignments": [20840], "declarations": [{"constant": false, "id": 20840, "mutability": "mutable", "name": "lookUpTime", "nodeType": "VariableDeclaration", "scope": 21022, "src": "4082:18:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20839, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4082:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20845, "initialValue": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20844, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"expression": {"id": 20841, "name": "block", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": -4, "src": "4103:5:32", "typeDescriptions": {"typeIdentifier": "t_magic_block", "typeString": "block"}}, "id": 20842, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "src": "4103:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"id": 20843, "name": "ago", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20825, "src": "4121:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4103:21:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "4082:42:32"}, {"assignments": [20847], "declarations": [{"constant": false, "id": 20847, "mutability": "mutable", "name": "latestSample", "nodeType": "VariableDeclaration", "scope": 21022, "src": "4135:20:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 20846, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "4135:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}], "id": 20851, "initialValue": {"baseExpression": {"id": 20848, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20819, "src": "4158:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, "id": 20850, "indexExpression": {"id": 20849, "name": "latestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20823, "src": "4166:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "nodeType": "IndexAccess", "src": "4158:20:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "nodeType": "VariableDeclarationStatement", "src": "4135:43:32"}, {"assignments": [20853], "declarations": [{"constant": false, "id": 20853, "mutability": "mutable", "name": "latestTimestamp", "nodeType": "VariableDeclaration", "scope": 21022, "src": "4188:23:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20852, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4188:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20857, "initialValue": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 20854, "name": "latestSample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20847, "src": "4214:12:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20855, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "4214:22:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 20856, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4214:24:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "4188:50:32"}, {"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20861, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20859, "name": "latestTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20853, "src": "4373:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "30", "id": 20860, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "4391:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "4373:19:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 20862, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11426, "src": "4394:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_Errors_$11426_$", "typeString": "type(library Errors)"}}, "id": 20863, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "ORACLE_NOT_INITIALIZED", "nodeType": "MemberAccess", "referencedDeclaration": 11149, "src": "4394:29:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20858, "name": "_require", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11021, "src": "4364:8:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bool_$_t_uint256_$returns$__$", "typeString": "function (bool,uint256) pure"}}, "id": 20864, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4364:60:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 20865, "nodeType": "ExpressionStatement", "src": "4364:60:32"}, {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20868, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20866, "name": "latestTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20853, "src": "4439:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "<=", "rightExpression": {"id": 20867, "name": "lookUpTime", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20840, "src": "4458:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4439:29:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "falseBody": {"id": 21020, "nodeType": "Block", "src": "5056:2766:32", "statements": [{"assignments": [20893], "declarations": [{"constant": false, "id": 20893, "mutability": "mutable", "name": "bufferLength", "nodeType": "VariableDeclaration", "scope": 21020, "src": "5310:20:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20892, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5310:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20894, "nodeType": "VariableDeclarationStatement", "src": "5310:20:32"}, {"assignments": [20896], "declarations": [{"constant": false, "id": 20896, "mutability": "mutable", "name": "oldestIndex", "nodeType": "VariableDeclaration", "scope": 21020, "src": "5344:19:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20895, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5344:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20900, "initialValue": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 20897, "name": "latestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20823, "src": "5366:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 20898, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "next", "nodeType": "MemberAccess", "referencedDeclaration": 15036, "src": "5366:16:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$", "typeString": "function (uint256) pure returns (uint256)"}}, "id": 20899, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "5366:18:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "5344:40:32"}, {"id": 20948, "nodeType": "Block", "src": "5398:1072:32", "statements": [{"assignments": [20902], "declarations": [{"constant": false, "id": 20902, "mutability": "mutable", "name": "oldestSample", "nodeType": "VariableDeclaration", "scope": 20948, "src": "5486:20:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 20901, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "5486:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}], "id": 20906, "initialValue": {"baseExpression": {"id": 20903, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20819, "src": "5509:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, "id": 20905, "indexExpression": {"id": 20904, "name": "oldestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20896, "src": "5517:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "nodeType": "IndexAccess", "src": "5509:20:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "nodeType": "VariableDeclarationStatement", "src": "5486:43:32"}, {"assignments": [20908], "declarations": [{"constant": false, "id": 20908, "mutability": "mutable", "name": "oldestTimestamp", "nodeType": "VariableDeclaration", "scope": 20948, "src": "5547:23:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20907, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5547:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20912, "initialValue": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 20909, "name": "oldestSample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20902, "src": "5573:12:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20910, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "5573:22:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 20911, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "5573:24:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "5547:50:32"}, {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20915, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20913, "name": "oldestTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20908, "src": "5620:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "30", "id": 20914, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "5638:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "5620:19:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "falseBody": {"id": 20938, "nodeType": "Block", "src": "5817:456:32", "statements": [{"expression": {"id": 20924, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 20922, "name": "bufferLength", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20893, "src": "6098:12:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"id": 20923, "name": "oldestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20896, "src": "6113:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6098:26:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 20925, "nodeType": "ExpressionStatement", "src": "6098:26:32"}, {"expression": {"id": 20928, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 20926, "name": "oldestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20896, "src": "6177:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"hexValue": "30", "id": 20927, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "6191:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "6177:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 20929, "nodeType": "ExpressionStatement", "src": "6177:15:32"}, {"expression": {"id": 20936, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 20930, "name": "oldestTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20908, "src": "6214:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"baseExpression": {"id": 20931, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20819, "src": "6232:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, "id": 20933, "indexExpression": {"hexValue": "30", "id": 20932, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "6240:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "nodeType": "IndexAccess", "src": "6232:10:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20934, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "6232:20:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 20935, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6232:22:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6214:40:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 20937, "nodeType": "ExpressionStatement", "src": "6214:40:32"}]}, "id": 20939, "nodeType": "IfStatement", "src": "5616:657:32", "trueBody": {"id": 20921, "nodeType": "Block", "src": "5641:170:32", "statements": [{"expression": {"id": 20919, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 20916, "name": "bufferLength", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20893, "src": "5766:12:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"expression": {"id": 20917, "name": "Buffer", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 15075, "src": "5781:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_Buffer_$15075_$", "typeString": "type(library Buffer)"}}, "id": 20918, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "SIZE", "nodeType": "MemberAccess", "referencedDeclaration": 15008, "src": "5781:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "5766:26:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 20920, "nodeType": "ExpressionStatement", "src": "5766:26:32"}]}}, {"expression": {"arguments": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20943, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20941, "name": "oldestTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20908, "src": "6396:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "<=", "rightExpression": {"id": 20942, "name": "lookUpTime", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20840, "src": "6415:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6396:29:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, {"expression": {"id": 20944, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11426, "src": "6427:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_contract$_Errors_$11426_$", "typeString": "type(library Errors)"}}, "id": 20945, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "ORACLE_QUERY_TOO_OLD", "nodeType": "MemberAccess", "referencedDeclaration": 11152, "src": "6427:27:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_bool", "typeString": "bool"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20940, "name": "_require", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11021, "src": "6387:8:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bool_$_t_uint256_$returns$__$", "typeString": "function (bool,uint256) pure"}}, "id": 20946, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6387:68:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$__$", "typeString": "tuple()"}}, "id": 20947, "nodeType": "ExpressionStatement", "src": "6387:68:32"}]}, {"assignments": [20950, 20952], "declarations": [{"constant": false, "id": 20950, "mutability": "mutable", "name": "prev", "nodeType": "VariableDeclaration", "scope": 21020, "src": "6572:12:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 20949, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "6572:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}, {"constant": false, "id": 20952, "mutability": "mutable", "name": "next", "nodeType": "VariableDeclaration", "scope": 21020, "src": "6586:12:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 20951, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "6586:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}], "id": 20959, "initialValue": {"arguments": [{"id": 20954, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20819, "src": "6620:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, {"id": 20955, "name": "lookUpTime", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20840, "src": "6629:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 20956, "name": "oldestIndex", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20896, "src": "6641:11:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, {"id": 20957, "name": "bufferLength", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20893, "src": "6654:12:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}, {"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20953, "name": "findNearestSample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21140, "src": "6602:17:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_view$_t_mapping$_t_uint256_$_t_bytes32_$_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_bytes32_$_t_bytes32_$", "typeString": "function (mapping(uint256 => bytes32),uint256,uint256,uint256) view returns (bytes32,bytes32)"}}, "id": 20958, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6602:65:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_tuple$_t_bytes32_$_t_bytes32_$", "typeString": "tuple(bytes32,bytes32)"}}, "nodeType": "VariableDeclarationStatement", "src": "6571:96:32"}, {"assignments": [20961], "declarations": [{"constant": false, "id": 20961, "mutability": "mutable", "name": "samplesTimeDiff", "nodeType": "VariableDeclaration", "scope": 21020, "src": "6793:23:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20960, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6793:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20969, "initialValue": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20968, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 20962, "name": "next", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20952, "src": "6819:4:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20963, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "6819:14:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 20964, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6819:16:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 20965, "name": "prev", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20950, "src": "6838:4:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20966, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "6838:14:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 20967, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "6838:16:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "6819:35:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "6793:61:32"}, {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20972, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20970, "name": "samplesTimeDiff", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20961, "src": "6873:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"hexValue": "30", "id": 20971, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "6891:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "src": "6873:19:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "falseBody": {"id": 21018, "nodeType": "Block", "src": "7511:301:32", "statements": [{"expression": {"arguments": [{"id": 21015, "name": "variable", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20821, "src": "7788:8:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}], "expression": {"id": 21013, "name": "prev", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20950, "src": "7771:4:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 21014, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "accumulator", "nodeType": "MemberAccess", "referencedDeclaration": 21320, "src": "7771:16:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$_t_enum$_Variable_$20643_$returns$_t_int256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32,enum IPriceOracle.Variable) pure returns (int256)"}}, "id": 21016, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7771:26:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "functionReturnParameters": 20829, "id": 21017, "nodeType": "Return", "src": "7764:33:32"}]}, "id": 21019, "nodeType": "IfStatement", "src": "6869:943:32", "trueBody": {"id": 21012, "nodeType": "Block", "src": "6894:611:32", "statements": [{"assignments": [20974], "declarations": [{"constant": false, "id": 20974, "mutability": "mutable", "name": "samplesAccDiff", "nodeType": "VariableDeclaration", "scope": 21012, "src": "7230:21:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}, "typeName": {"id": 20973, "name": "int256", "nodeType": "ElementaryTypeName", "src": "7230:6:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "visibility": "internal"}], "id": 20984, "initialValue": {"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 20983, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [{"id": 20977, "name": "variable", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20821, "src": "7271:8:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}], "expression": {"id": 20975, "name": "next", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20952, "src": "7254:4:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20976, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "accumulator", "nodeType": "MemberAccess", "referencedDeclaration": 21320, "src": "7254:16:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$_t_enum$_Variable_$20643_$returns$_t_int256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32,enum IPriceOracle.Variable) pure returns (int256)"}}, "id": 20978, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7254:26:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"arguments": [{"id": 20981, "name": "variable", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20821, "src": "7300:8:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}], "expression": {"id": 20979, "name": "prev", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20950, "src": "7283:4:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20980, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "accumulator", "nodeType": "MemberAccess", "referencedDeclaration": 21320, "src": "7283:16:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$_t_enum$_Variable_$20643_$returns$_t_int256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32,enum IPriceOracle.Variable) pure returns (int256)"}}, "id": 20982, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7283:26:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "7254:55:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "VariableDeclarationStatement", "src": "7230:79:32"}, {"assignments": [20986], "declarations": [{"constant": false, "id": 20986, "mutability": "mutable", "name": "elapsed", "nodeType": "VariableDeclaration", "scope": 21012, "src": "7327:15:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20985, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7327:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20992, "initialValue": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20991, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20987, "name": "lookUpTime", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20840, "src": "7345:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 20988, "name": "prev", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20950, "src": "7358:4:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20989, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "7358:14:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 20990, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7358:16:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "7345:29:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "7327:47:32"}, {"expression": {"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 21010, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [{"id": 20995, "name": "variable", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20821, "src": "7416:8:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}], "expression": {"id": 20993, "name": "prev", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20950, "src": "7399:4:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20994, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "accumulator", "nodeType": "MemberAccess", "referencedDeclaration": 21320, "src": "7399:16:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$_t_enum$_Variable_$20643_$returns$_t_int256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32,enum IPriceOracle.Variable) pure returns (int256)"}}, "id": 20996, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7399:26:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"components": [{"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 21008, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 21002, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20997, "name": "samplesAccDiff", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20974, "src": "7430:14:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"arguments": [{"id": 21000, "name": "elapsed", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20986, "src": "7454:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20999, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "ElementaryTypeNameExpression", "src": "7447:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_int256_$", "typeString": "type(int256)"}, "typeName": {"id": 20998, "name": "int256", "nodeType": "ElementaryTypeName", "src": "7447:6:32", "typeDescriptions": {}}}, "id": 21001, "isConstant": false, "isLValue": false, "isPure": false, "kind": "typeConversion", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7447:15:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "7430:32:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}], "id": 21003, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "7429:34:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"arguments": [{"id": 21006, "name": "samplesTimeDiff", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20961, "src": "7473:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 21005, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "ElementaryTypeNameExpression", "src": "7466:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_int256_$", "typeString": "type(int256)"}, "typeName": {"id": 21004, "name": "int256", "nodeType": "ElementaryTypeName", "src": "7466:6:32", "typeDescriptions": {}}}, "id": 21007, "isConstant": false, "isLValue": false, "isPure": false, "kind": "typeConversion", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "7466:23:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "7429:60:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}], "id": 21009, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "7428:62:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "7399:91:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "functionReturnParameters": 20829, "id": 21011, "nodeType": "Return", "src": "7392:98:32"}]}}]}, "id": 21021, "nodeType": "IfStatement", "src": "4435:3387:32", "trueBody": {"id": 20891, "nodeType": "Block", "src": "4470:580:32", "statements": [{"assignments": [20870], "declarations": [{"constant": false, "id": 20870, "mutability": "mutable", "name": "elapsed", "nodeType": "VariableDeclaration", "scope": 20891, "src": "4885:15:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20869, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4885:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 20874, "initialValue": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 20873, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 20871, "name": "lookUpTime", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20840, "src": "4903:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"id": 20872, "name": "latestTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20853, "src": "4916:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "4903:28:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "4885:46:32"}, {"expression": {"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 20889, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [{"id": 20877, "name": "variable", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20821, "src": "4977:8:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}], "expression": {"id": 20875, "name": "latestSample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20847, "src": "4952:12:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20876, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "accumulator", "nodeType": "MemberAccess", "referencedDeclaration": 21320, "src": "4952:24:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$_t_enum$_Variable_$20643_$returns$_t_int256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32,enum IPriceOracle.Variable) pure returns (int256)"}}, "id": 20878, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4952:34:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"components": [{"commonType": {"typeIdentifier": "t_int256", "typeString": "int256"}, "id": 20887, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"arguments": [{"id": 20881, "name": "variable", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20821, "src": "5011:8:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}], "expression": {"id": 20879, "name": "latestSample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20847, "src": "4990:12:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 20880, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "instant", "nodeType": "MemberAccess", "referencedDeclaration": 21282, "src": "4990:20:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$_t_enum$_Variable_$20643_$returns$_t_int256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32,enum IPriceOracle.Variable) pure returns (int256)"}}, "id": 20882, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "4990:30:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "nodeType": "BinaryOperation", "operator": "*", "rightExpression": {"arguments": [{"id": 20885, "name": "elapsed", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20870, "src": "5030:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}], "id": 20884, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "ElementaryTypeNameExpression", "src": "5023:6:32", "typeDescriptions": {"typeIdentifier": "t_type$_t_int256_$", "typeString": "type(int256)"}, "typeName": {"id": 20883, "name": "int256", "nodeType": "ElementaryTypeName", "src": "5023:6:32", "typeDescriptions": {}}}, "id": 20886, "isConstant": false, "isLValue": false, "isPure": false, "kind": "typeConversion", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "5023:15:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "4990:48:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}], "id": 20888, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "4989:50:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "src": "4952:87:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "functionReturnParameters": 20829, "id": 20890, "nodeType": "Return", "src": "4945:94:32"}]}}]}, "documentation": {"id": 20815, "nodeType": "StructuredDocumentation", "src": "2712:979:32", "text": " @dev Returns the value of the accumulator for `variable` `ago` seconds ago. `latestIndex` must be the index of\n the latest sample in the buffer.\n Reverts under the following conditions:\n  - if the buffer is empty.\n  - if querying past information and the buffer has not been fully initialized.\n  - if querying older information than available in the buffer. Note that a full buffer guarantees queries for the\n    past 34 hours will not revert.\n If requesting information for a timestamp later than the latest one, it is extrapolated using the latest\n available data.\n When no exact information is available for the requested past timestamp (as usually happens, since at most one\n timestamp is stored every two minutes), it is estimated by performing linear interpolation using the closest\n values. This process is guaranteed to complete performing at most 10 storage reads."}, "functionSelector": "34171a85", "id": 21023, "implemented": true, "kind": "function", "modifiers": [], "name": "getPastAccumulator", "nodeType": "FunctionDefinition", "parameters": {"id": 20826, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 20819, "mutability": "mutable", "name": "samples", "nodeType": "VariableDeclaration", "scope": 21023, "src": "3733:43:32", "stateVariable": false, "storageLocation": "storage", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "typeName": {"id": 20818, "keyType": {"id": 20816, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3741:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Mapping", "src": "3733:27:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "valueType": {"id": 20817, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "3752:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}}, "visibility": "internal"}, {"constant": false, "id": 20821, "mutability": "mutable", "name": "variable", "nodeType": "VariableDeclaration", "scope": 21023, "src": "3786:30:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}, "typeName": {"id": 20820, "name": "IPriceOracle.Variable", "nodeType": "UserDefinedTypeName", "referencedDeclaration": 20643, "src": "3786:21:32", "typeDescriptions": {"typeIdentifier": "t_enum$_Variable_$20643", "typeString": "enum IPriceOracle.Variable"}}, "visibility": "internal"}, {"constant": false, "id": 20823, "mutability": "mutable", "name": "latestIndex", "nodeType": "VariableDeclaration", "scope": 21023, "src": "3826:19:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20822, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3826:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 20825, "mutability": "mutable", "name": "ago", "nodeType": "VariableDeclaration", "scope": 21023, "src": "3855:11:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 20824, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3855:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "3723:149:32"}, "returnParameters": {"id": 20829, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 20828, "mutability": "mutable", "name": "", "nodeType": "VariableDeclaration", "scope": 21023, "src": "3894:6:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}, "typeName": {"id": 20827, "name": "int256", "nodeType": "ElementaryTypeName", "src": "3894:6:32", "typeDescriptions": {"typeIdentifier": "t_int256", "typeString": "int256"}}, "visibility": "internal"}], "src": "3893:8:32"}, "scope": 21141, "src": "3696:4132:32", "stateMutability": "view", "virtual": false, "visibility": "public"}, {"body": {"id": 21139, "nodeType": "Block", "src": "8492:2399:32", "statements": [{"assignments": [21042], "declarations": [{"constant": false, "id": 21042, "mutability": "mutable", "name": "low", "nodeType": "VariableDeclaration", "scope": 21139, "src": "8987:11:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21041, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8987:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 21044, "initialValue": {"hexValue": "30", "id": 21043, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "9001:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0"}, "value": "0"}, "nodeType": "VariableDeclarationStatement", "src": "8987:15:32"}, {"assignments": [21046], "declarations": [{"constant": false, "id": 21046, "mutability": "mutable", "name": "high", "nodeType": "VariableDeclaration", "scope": 21139, "src": "9012:12:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21045, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9012:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 21050, "initialValue": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21049, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21047, "name": "length", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21034, "src": "9027:6:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"hexValue": "31", "id": 21048, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "9036:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_1_by_1", "typeString": "int_const 1"}, "value": "1"}, "src": "9027:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "9012:25:32"}, {"assignments": [21052], "declarations": [{"constant": false, "id": 21052, "mutability": "mutable", "name": "mid", "nodeType": "VariableDeclaration", "scope": 21139, "src": "9047:11:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21051, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9047:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 21053, "nodeType": "VariableDeclarationStatement", "src": "9047:11:32"}, {"assignments": [21055], "declarations": [{"constant": false, "id": 21055, "mutability": "mutable", "name": "sample", "nodeType": "VariableDeclaration", "scope": 21139, "src": "9356:14:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 21054, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "9356:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}], "id": 21056, "nodeType": "VariableDeclarationStatement", "src": "9356:14:32"}, {"assignments": [21058], "declarations": [{"constant": false, "id": 21058, "mutability": "mutable", "name": "sampleTimestamp", "nodeType": "VariableDeclaration", "scope": 21139, "src": "9380:23:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21057, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9380:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 21059, "nodeType": "VariableDeclarationStatement", "src": "9380:23:32"}, {"body": {"id": 21118, "nodeType": "Block", "src": "9434:1242:32", "statements": [{"assignments": [21064], "declarations": [{"constant": false, "id": 21064, "mutability": "mutable", "name": "midWithoutOffset", "nodeType": "VariableDeclaration", "scope": 21118, "src": "9496:24:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21063, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "9496:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "id": 21071, "initialValue": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21070, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"components": [{"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21067, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21065, "name": "high", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21046, "src": "9524:4:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"id": 21066, "name": "low", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21042, "src": "9531:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9524:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "id": 21068, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "9523:12:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "/", "rightExpression": {"hexValue": "32", "id": 21069, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "9538:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_2_by_1", "typeString": "int_const 2"}, "value": "2"}, "src": "9523:16:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "VariableDeclarationStatement", "src": "9496:43:32"}, {"expression": {"id": 21077, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 21072, "name": "mid", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21052, "src": "9674:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [{"id": 21075, "name": "offset", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21032, "src": "9701:6:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}], "expression": {"argumentTypes": [{"typeIdentifier": "t_uint256", "typeString": "uint256"}], "expression": {"id": 21073, "name": "midWithoutOffset", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21064, "src": "9680:16:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 21074, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "add", "nodeType": "MemberAccess", "referencedDeclaration": 15054, "src": "9680:20:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)"}}, "id": 21076, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9680:28:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9674:34:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 21078, "nodeType": "ExpressionStatement", "src": "9674:34:32"}, {"expression": {"id": 21083, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 21079, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21055, "src": "9722:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"baseExpression": {"id": 21080, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21028, "src": "9731:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, "id": 21082, "indexExpression": {"id": 21081, "name": "mid", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21052, "src": "9739:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "nodeType": "IndexAccess", "src": "9731:12:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "src": "9722:21:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 21084, "nodeType": "ExpressionStatement", "src": "9722:21:32"}, {"expression": {"id": 21089, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 21085, "name": "sampleTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21058, "src": "9757:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 21086, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21055, "src": "9775:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "id": 21087, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "timestamp", "nodeType": "MemberAccess", "referencedDeclaration": 21334, "src": "9775:16:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_bytes32_$returns$_t_uint256_$bound_to$_t_bytes32_$", "typeString": "function (bytes32) pure returns (uint256)"}}, "id": 21088, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "9775:18:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9757:36:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 21090, "nodeType": "ExpressionStatement", "src": "9757:36:32"}, {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21093, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21091, "name": "sampleTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21058, "src": "9812:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": {"id": 21092, "name": "lookUpDate", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21030, "src": "9830:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9812:28:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "falseBody": {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21103, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21101, "name": "sampleTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21058, "src": "10025:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": ">", "rightExpression": {"id": 21102, "name": "lookUpDate", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21030, "src": "10043:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10025:28:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "falseBody": {"id": 21115, "nodeType": "Block", "src": "10470:196:32", "statements": [{"expression": {"components": [{"id": 21111, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21055, "src": "10636:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, {"id": 21112, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21055, "src": "10644:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}], "id": 21113, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "10635:16:32", "typeDescriptions": {"typeIdentifier": "t_tuple$_t_bytes32_$_t_bytes32_$", "typeString": "tuple(bytes32,bytes32)"}}, "functionReturnParameters": 21040, "id": 21114, "nodeType": "Return", "src": "10628:23:32"}]}, "id": 21116, "nodeType": "IfStatement", "src": "10021:645:32", "trueBody": {"id": 21110, "nodeType": "Block", "src": "10055:409:32", "statements": [{"expression": {"id": 21108, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 21104, "name": "high", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21046, "src": "10422:4:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21107, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21105, "name": "midWithoutOffset", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21064, "src": "10429:16:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": {"hexValue": "31", "id": 21106, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "10448:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_1_by_1", "typeString": "int_const 1"}, "value": "1"}, "src": "10429:20:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10422:27:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 21109, "nodeType": "ExpressionStatement", "src": "10422:27:32"}]}}, "id": 21117, "nodeType": "IfStatement", "src": "9808:858:32", "trueBody": {"id": 21100, "nodeType": "Block", "src": "9842:173:32", "statements": [{"expression": {"id": 21098, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": {"id": 21094, "name": "low", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21042, "src": "9974:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Assignment", "operator": "=", "rightHandSide": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21097, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21095, "name": "midWithoutOffset", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21064, "src": "9980:16:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": {"hexValue": "31", "id": 21096, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "9999:1:32", "typeDescriptions": {"typeIdentifier": "t_rational_1_by_1", "typeString": "int_const 1"}, "value": "1"}, "src": "9980:20:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9974:26:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 21099, "nodeType": "ExpressionStatement", "src": "9974:26:32"}]}}]}, "condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21062, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21060, "name": "low", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21042, "src": "9421:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "<=", "rightExpression": {"id": 21061, "name": "high", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21046, "src": "9428:4:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "9421:11:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "id": 21119, "nodeType": "WhileStatement", "src": "9414:1262:32"}, {"expression": {"condition": {"commonType": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "id": 21122, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": {"id": 21120, "name": "sampleTimestamp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21058, "src": "10792:15:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": {"id": 21121, "name": "lookUpDate", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21030, "src": "10810:10:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "src": "10792:28:32", "typeDescriptions": {"typeIdentifier": "t_bool", "typeString": "bool"}}, "falseExpression": {"components": [{"baseExpression": {"id": 21130, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21028, "src": "10856:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, "id": 21134, "indexExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 21131, "name": "mid", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21052, "src": "10864:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 21132, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "prev", "nodeType": "MemberAccess", "referencedDeclaration": 15022, "src": "10864:8:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$", "typeString": "function (uint256) pure returns (uint256)"}}, "id": 21133, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10864:10:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "nodeType": "IndexAccess", "src": "10856:19:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, {"id": 21135, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21055, "src": "10877:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}], "id": 21136, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "10855:29:32", "typeDescriptions": {"typeIdentifier": "t_tuple$_t_bytes32_$_t_bytes32_$", "typeString": "tuple(bytes32,bytes32)"}}, "id": 21137, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "Conditional", "src": "10792:92:32", "trueExpression": {"components": [{"id": 21123, "name": "sample", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21055, "src": "10824:6:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, {"baseExpression": {"id": 21124, "name": "samples", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21028, "src": "10832:7:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}}, "id": 21128, "indexExpression": {"arguments": [], "expression": {"argumentTypes": [], "expression": {"id": 21125, "name": "mid", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 21052, "src": "10840:3:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "id": 21126, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberName": "next", "nodeType": "MemberAccess", "referencedDeclaration": 15036, "src": "10840:8:32", "typeDescriptions": {"typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$", "typeString": "function (uint256) pure returns (uint256)"}}, "id": 21127, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "names": [], "nodeType": "FunctionCall", "src": "10840:10:32", "tryCall": false, "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "isConstant": false, "isLValue": true, "isPure": false, "lValueRequested": false, "nodeType": "IndexAccess", "src": "10832:19:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}], "id": 21129, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "10823:29:32", "typeDescriptions": {"typeIdentifier": "t_tuple$_t_bytes32_$_t_bytes32_$", "typeString": "tuple(bytes32,bytes32)"}}, "typeDescriptions": {"typeIdentifier": "t_tuple$_t_bytes32_$_t_bytes32_$", "typeString": "tuple(bytes32,bytes32)"}}, "functionReturnParameters": 21040, "id": 21138, "nodeType": "Return", "src": "10785:99:32"}]}, "documentation": {"id": 21024, "nodeType": "StructuredDocumentation", "src": "7834:442:32", "text": " @dev Finds the two samples with timestamps before and after `lookUpDate`. If one of the samples matches exactly,\n both `prev` and `next` will be it. `offset` is the index of the oldest sample in the buffer. `length` is the size\n of the samples list.\n Assumes `lookUpDate` is greater or equal than the timestamp of the oldest sample, and less or equal than the\n timestamp of the latest sample."}, "functionSelector": "3d60fb0a", "id": 21140, "implemented": true, "kind": "function", "modifiers": [], "name": "findNearestSample", "nodeType": "FunctionDefinition", "parameters": {"id": 21035, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 21028, "mutability": "mutable", "name": "samples", "nodeType": "VariableDeclaration", "scope": 21140, "src": "8317:43:32", "stateVariable": false, "storageLocation": "storage", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "typeName": {"id": 21027, "keyType": {"id": 21025, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8325:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "nodeType": "Mapping", "src": "8317:27:32", "typeDescriptions": {"typeIdentifier": "t_mapping$_t_uint256_$_t_bytes32_$", "typeString": "mapping(uint256 => bytes32)"}, "valueType": {"id": 21026, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "8336:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}}, "visibility": "internal"}, {"constant": false, "id": 21030, "mutability": "mutable", "name": "lookUpDate", "nodeType": "VariableDeclaration", "scope": 21140, "src": "8370:18:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21029, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8370:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 21032, "mutability": "mutable", "name": "offset", "nodeType": "VariableDeclaration", "scope": 21140, "src": "8398:14:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21031, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8398:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}, {"constant": false, "id": 21034, "mutability": "mutable", "name": "length", "nodeType": "VariableDeclaration", "scope": 21140, "src": "8422:14:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}, "typeName": {"id": 21033, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8422:7:32", "typeDescriptions": {"typeIdentifier": "t_uint256", "typeString": "uint256"}}, "visibility": "internal"}], "src": "8307:135:32"}, "returnParameters": {"id": 21040, "nodeType": "ParameterList", "parameters": [{"constant": false, "id": 21037, "mutability": "mutable", "name": "prev", "nodeType": "VariableDeclaration", "scope": 21140, "src": "8464:12:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 21036, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "8464:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}, {"constant": false, "id": 21039, "mutability": "mutable", "name": "next", "nodeType": "VariableDeclaration", "scope": 21140, "src": "8478:12:32", "stateVariable": false, "storageLocation": "default", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}, "typeName": {"id": 21038, "name": "bytes32", "nodeType": "ElementaryTypeName", "src": "8478:7:32", "typeDescriptions": {"typeIdentifier": "t_bytes32", "typeString": "bytes32"}}, "visibility": "internal"}], "src": "8463:28:32"}, "scope": 21141, "src": "8281:2610:32", "stateMutability": "view", "virtual": false, "visibility": "public"}], "scope": 21142, "src": "1379:9514:32"}], "src": "688:10206:32"}, "bytecode": "610b26610026600b82828239805160001a60731461001957fe5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100565760003560e01c80630397bee01461005b57806334171a85146100845780633d60fb0a1461009757806379eaef82146100b8575b600080fd5b61006e6100693660046109bd565b6100cb565b60405161007b9190610ae7565b60405180910390f35b61006e6100923660046109f1565b610111565b6100aa6100a5366004610aa8565b61028b565b60405161007b929190610ad9565b61006e6100c6366004610a2b565b610363565b6000818152602084905260408120546100f0826100e7836103c7565b116101396103db565b60006100fc82866103ed565b90506101078161043e565b9695505050505050565b6000610122824210156101386103db565b600083815260208690526040812054428490039161013f826103c7565b9050610150600082116101396103db565b82811161017c5780830380610165848a6103ed565b02610170848a610451565b01945050505050610283565b60008061018888610495565b600081815260208c905260408120549192506101a3826103c7565b905080156101b55761040093506101d4565b600080805260208d90526040812054939450926101d1906103c7565b90505b6101e38782111561013a6103db565b50506000806101f48c88858761028b565b915091506000610203836103c7565b61020c836103c7565b039050801561026e576000610221848e610451565b61022b848f610451565b0390506000610239856103c7565b8a039050828183028161024857fe5b0561025c8f8761045190919063ffffffff16565b019a5050505050505050505050610283565b610278838d610451565b985050505050505050505b949350505050565b6000808060001984018180805b83851161030b576002858501046102af818b61049e565b600081815260208e9052604090205490945092506102cc836103c7565b91508a8210156102e157806001019550610305565b8a8211156102f457600181039450610305565b82839750975050505050505061035a565b50610298565b898110610333578a600061031e856104af565b81526020019081526020016000205482610350565b818b600061034086610495565b8152602001908152602001600020545b9650965050505050505b94509492505050565b600061037983602001516000141561013c6103db565b6000610395858560000151858760200151886040015101610111565b905060006103ad868660000151868860400151610111565b90506101078560200151838303816103c157fe5b0561043e565b60006103d382826104bc565b90505b919050565b816103e9576103e9816104c6565b5050565b6000808260028111156103fc57fe5b14156104125761040b83610519565b9050610438565b600182600281111561042057fe5b141561042f5761040b83610526565b61040b83610533565b92915050565b60006103d3655af3107a40008302610540565b60008082600281111561046057fe5b141561046f5761040b8361091e565b600182600281111561047d57fe5b141561048c5761040b8361092b565b61040b83610938565b60006103d38260015b60006104008383015b069392505050565b60006103d3826001610945565b1c637fffffff1690565b62461bcd60e51b6000908152602060045260076024526642414c23000030600a808404818106603090810160081b95839006959095019082900491820690940160101b939093010160c81b604452606490fd5b60006103d38260ea610954565b60006103d382609f610954565b60006103d3826054610954565b600061056f680238fd42c5cf03ffff198312158015610568575068070c1cc73b00c800008313155b60096103db565b60008212156105a35761058482600003610540565b6ec097ce7bc90715b34b9f10000000008161059b57fe5b0590506103d6565b60006806f05b59d3b200000083126105e357506806f05b59d3b1ffffff1990910190770195e54c5dd42177f53a27172fa9ec630262827000000000610619565b6803782dace9d9000000831261061557506803782dace9d8ffffff19909101906b1425982cf597cd205cef7380610619565b5060015b6064929092029168056bc75e2d6310000068ad78ebc5ac6200000084126106695768ad78ebc5ac61ffffff199093019268056bc75e2d631000006e01855144814a7ff805980ff008400082020590505b6856bc75e2d63100000084126106a5576856bc75e2d630ffffff199093019268056bc75e2d631000006b02df0ab5a80a22c61ab5a70082020590505b682b5e3af16b1880000084126106df57682b5e3af16b187fffff199093019268056bc75e2d63100000693f1fce3da636ea5cf85082020590505b6815af1d78b58c4000008412610719576815af1d78b58c3fffff199093019268056bc75e2d63100000690127fa27722cc06cc5e282020590505b680ad78ebc5ac6200000841261075257680ad78ebc5ac61fffff199093019268056bc75e2d6310000068280e60114edb805d0382020590505b68056bc75e2d63100000841261078b5768056bc75e2d630fffff199093019268056bc75e2d63100000680ebc5fb4174612111082020590505b6802b5e3af16b188000084126107c4576802b5e3af16b187ffff199093019268056bc75e2d631000006808f00f760a4b2db55d82020590505b68015af1d78b58c4000084126107fd5768015af1d78b58c3ffff199093019268056bc75e2d631000006806f5f177578893793782020590505b68056bc75e2d631000008481019085906002908280020505918201919050600368056bc75e2d631000008783020505918201919050600468056bc75e2d631000008783020505918201919050600568056bc75e2d631000008783020505918201919050600668056bc75e2d631000008783020505918201919050600768056bc75e2d631000008783020505918201919050600868056bc75e2d631000008783020505918201919050600968056bc75e2d631000008783020505918201919050600a68056bc75e2d631000008783020505918201919050600b68056bc75e2d631000008783020505918201919050600c68056bc75e2d631000008783020505918201919050606468056bc75e2d63100000848402058502059695505050505050565b60006103d38260b561097b565b60006103d382606a61097b565b60006103d382601f61097b565b600061040082840381016104a7565b600082821c623fffff16621fffff811361096e5780610283565b623fffff19179392505050565b600082821c661fffffffffffff16660fffffffffffff811361099d5780610283565b661fffffffffffff19179392505050565b8035600381106103d657600080fd5b6000806000606084860312156109d1578283fd5b833592506109e1602085016109ae565b9150604084013590509250925092565b60008060008060808587031215610a06578081fd5b84359350610a16602086016109ae565b93969395505050506040820135916060013590565b600080600083850360a0811215610a40578384fd5b843593506060601f1982011215610a55578283fd5b506040516060810181811067ffffffffffffffff82111715610a7357fe5b604052610a82602086016109ae565b815260408581013560208301526060860135908201529295929450505060809091013590565b60008060008060808587031215610abd578384fd5b5050823594602084013594506040840135936060013592509050565b918252602082015260400190565b9081526020019056fea2646970667358221220bb94f6875a329b79922d3070278c0a5c639e779c0603cdf8d7dbab14da7a69d764736f6c63430007060033", "bytecodeSha1": "ab5e45c1ce253c46ceb4d99c9243032336b5d68a", "compiler": {"evm_version": "berlin", "optimizer": {"enabled": true, "runs": 200}, "version": "0.7.6+commit.7338295f"}, "contractName": "QueryProcessor", "coverageMap": {"branches": {"30": {}, "32": {"QueryProcessor.findNearestSample": {"92": [9812, 9840, false], "93": [10025, 10053, false], "94": [10792, 10820, true]}, "QueryProcessor.getPastAccumulator": {"89": [4439, 4468, false], "90": [5620, 5639, false], "91": [6873, 6892, false]}}, "33": {"Samples.accumulator": {"108": [5180, 5224, false], "109": [5292, 5335, false]}, "Samples.instant": {"106": [4625, 4669, false], "107": [4738, 4781, false]}}, "40": {}, "47": {}, "49": {"WordCodec.decodeInt22": {"110": [12558, 12577, true]}, "WordCodec.decodeInt53": {"111": [13167, 13186, true]}}, "51": {"LogExpMath.exp": {"95": [7439, 7444, false], "96": [9117, 9124, false], "97": [9194, 9201, false], "98": [9742, 9749, false], "99": [9843, 9850, false], "100": [9944, 9951, false], "101": [10045, 10052, false], "102": [10146, 10153, false], "103": [10247, 10254, false], "104": [10348, 10355, false], "105": [10449, 10456, false]}}}, "statements": {"30": {"Buffer.add": {"31": [1504, 1534]}, "Buffer.next": {"30": [1276, 1296]}, "Buffer.prev": {"32": [1077, 1097]}, "Buffer.sub": {"86": [1743, 1780]}}, "32": {"QueryProcessor.findNearestSample": {"12": [9674, 9708], "13": [9722, 9743], "14": [9757, 9793], "15": [9974, 10000], "16": [10422, 10449], "17": [10628, 10651], "18": [10785, 10884]}, "QueryProcessor.getInstantValue": {"0": [1821, 1884], "1": [1954, 2006]}, "QueryProcessor.getPastAccumulator": {"2": [4003, 4072], "3": [4364, 4424], "4": [4945, 5039], "5": [5766, 5792], "6": [6177, 6192], "7": [6214, 6254], "8": [6098, 6124], "9": [6387, 6455], "10": [7392, 7490], "11": [7764, 7797]}, "QueryProcessor.getTimeWeightedAverage": {"19": [2329, 2378], "20": [2606, 2699]}}, "33": {"Samples._accLogBptPrice": {"84": [6629, 6681]}, "Samples._accLogInvariant": {"85": [7116, 7168]}, "Samples._accLogPairPrice": {"83": [6143, 6196]}, "Samples._instLogBptPrice": {"35": [6388, 6441]}, "Samples._instLogInvariant": {"36": [6874, 6927]}, "Samples._instLogPairPrice": {"34": [5899, 5953]}, "Samples.accumulator": {"27": [5240, 5271], "28": [5351, 5381], "29": [5471, 5502]}, "Samples.instant": {"23": [4685, 4717], "24": [4797, 4828], "25": [4918, 4950]}, "Samples.timestamp": {"21": [5660, 5705]}}, "40": {"_require": {"22": [946, 964]}}, "47": {"LogCompression.fromLowResLog": {"26": [2669, 2732]}}, "49": {"WordCodec.decodeInt22": {"87": [12551, 12615]}, "WordCodec.decodeInt53": {"88": [13160, 13224]}, "WordCodec.decodeUint31": {"33": [11156, 11197]}}, "51": {"LogExpMath.exp": {"37": [7335, 7424], "38": [7741, 7777], "39": [9140, 9147], "40": [9217, 9224], "41": [9281, 9292], "42": [9483, 9491], "43": [9765, 9772], "44": [9786, 9819], "45": [9866, 9873], "46": [9887, 9920], "47": [9967, 9974], "48": [9988, 10021], "49": [10068, 10075], "50": [10089, 10122], "51": [10169, 10176], "52": [10190, 10223], "53": [10270, 10277], "54": [10291, 10324], "55": [10371, 10378], "56": [10392, 10425], "57": [10472, 10479], "58": [10493, 10526], "59": [11069, 11086], "60": [11323, 11355], "61": [11365, 11382], "62": [11393, 11425], "63": [11435, 11452], "64": [11463, 11495], "65": [11505, 11522], "66": [11533, 11565], "67": [11575, 11592], "68": [11603, 11635], "69": [11645, 11662], "70": [11673, 11705], "71": [11715, 11732], "72": [11743, 11775], "73": [11785, 11802], "74": [11813, 11845], "75": [11855, 11872], "76": [11883, 11916], "77": [11926, 11943], "78": [11954, 11987], "79": [11997, 12014], "80": [12025, 12058], "81": [12068, 12085], "82": [12586, 12643]}}}}, "dependencies": ["Buffer", "Errors", "LogCompression", "LogExpMath", "Samples", "WordCodec"], "deployedBytecode": "73000000000000000000000000000000000000000030146080604052600436106100565760003560e01c80630397bee01461005b57806334171a85146100845780633d60fb0a1461009757806379eaef82146100b8575b600080fd5b61006e6100693660046109bd565b6100cb565b60405161007b9190610ae7565b60405180910390f35b61006e6100923660046109f1565b610111565b6100aa6100a5366004610aa8565b61028b565b60405161007b929190610ad9565b61006e6100c6366004610a2b565b610363565b6000818152602084905260408120546100f0826100e7836103c7565b116101396103db565b60006100fc82866103ed565b90506101078161043e565b9695505050505050565b6000610122824210156101386103db565b600083815260208690526040812054428490039161013f826103c7565b9050610150600082116101396103db565b82811161017c5780830380610165848a6103ed565b02610170848a610451565b01945050505050610283565b60008061018888610495565b600081815260208c905260408120549192506101a3826103c7565b905080156101b55761040093506101d4565b600080805260208d90526040812054939450926101d1906103c7565b90505b6101e38782111561013a6103db565b50506000806101f48c88858761028b565b915091506000610203836103c7565b61020c836103c7565b039050801561026e576000610221848e610451565b61022b848f610451565b0390506000610239856103c7565b8a039050828183028161024857fe5b0561025c8f8761045190919063ffffffff16565b019a5050505050505050505050610283565b610278838d610451565b985050505050505050505b949350505050565b6000808060001984018180805b83851161030b576002858501046102af818b61049e565b600081815260208e9052604090205490945092506102cc836103c7565b91508a8210156102e157806001019550610305565b8a8211156102f457600181039450610305565b82839750975050505050505061035a565b50610298565b898110610333578a600061031e856104af565b81526020019081526020016000205482610350565b818b600061034086610495565b8152602001908152602001600020545b9650965050505050505b94509492505050565b600061037983602001516000141561013c6103db565b6000610395858560000151858760200151886040015101610111565b905060006103ad868660000151868860400151610111565b90506101078560200151838303816103c157fe5b0561043e565b60006103d382826104bc565b90505b919050565b816103e9576103e9816104c6565b5050565b6000808260028111156103fc57fe5b14156104125761040b83610519565b9050610438565b600182600281111561042057fe5b141561042f5761040b83610526565b61040b83610533565b92915050565b60006103d3655af3107a40008302610540565b60008082600281111561046057fe5b141561046f5761040b8361091e565b600182600281111561047d57fe5b141561048c5761040b8361092b565b61040b83610938565b60006103d38260015b60006104008383015b069392505050565b60006103d3826001610945565b1c637fffffff1690565b62461bcd60e51b6000908152602060045260076024526642414c23000030600a808404818106603090810160081b95839006959095019082900491820690940160101b939093010160c81b604452606490fd5b60006103d38260ea610954565b60006103d382609f610954565b60006103d3826054610954565b600061056f680238fd42c5cf03ffff198312158015610568575068070c1cc73b00c800008313155b60096103db565b60008212156105a35761058482600003610540565b6ec097ce7bc90715b34b9f10000000008161059b57fe5b0590506103d6565b60006806f05b59d3b200000083126105e357506806f05b59d3b1ffffff1990910190770195e54c5dd42177f53a27172fa9ec630262827000000000610619565b6803782dace9d9000000831261061557506803782dace9d8ffffff19909101906b1425982cf597cd205cef7380610619565b5060015b6064929092029168056bc75e2d6310000068ad78ebc5ac6200000084126106695768ad78ebc5ac61ffffff199093019268056bc75e2d631000006e01855144814a7ff805980ff008400082020590505b6856bc75e2d63100000084126106a5576856bc75e2d630ffffff199093019268056bc75e2d631000006b02df0ab5a80a22c61ab5a70082020590505b682b5e3af16b1880000084126106df57682b5e3af16b187fffff199093019268056bc75e2d63100000693f1fce3da636ea5cf85082020590505b6815af1d78b58c4000008412610719576815af1d78b58c3fffff199093019268056bc75e2d63100000690127fa27722cc06cc5e282020590505b680ad78ebc5ac6200000841261075257680ad78ebc5ac61fffff199093019268056bc75e2d6310000068280e60114edb805d0382020590505b68056bc75e2d63100000841261078b5768056bc75e2d630fffff199093019268056bc75e2d63100000680ebc5fb4174612111082020590505b6802b5e3af16b188000084126107c4576802b5e3af16b187ffff199093019268056bc75e2d631000006808f00f760a4b2db55d82020590505b68015af1d78b58c4000084126107fd5768015af1d78b58c3ffff199093019268056bc75e2d631000006806f5f177578893793782020590505b68056bc75e2d631000008481019085906002908280020505918201919050600368056bc75e2d631000008783020505918201919050600468056bc75e2d631000008783020505918201919050600568056bc75e2d631000008783020505918201919050600668056bc75e2d631000008783020505918201919050600768056bc75e2d631000008783020505918201919050600868056bc75e2d631000008783020505918201919050600968056bc75e2d631000008783020505918201919050600a68056bc75e2d631000008783020505918201919050600b68056bc75e2d631000008783020505918201919050600c68056bc75e2d631000008783020505918201919050606468056bc75e2d63100000848402058502059695505050505050565b60006103d38260b561097b565b60006103d382606a61097b565b60006103d382601f61097b565b600061040082840381016104a7565b600082821c623fffff16621fffff811361096e5780610283565b623fffff19179392505050565b600082821c661fffffffffffff16660fffffffffffff811361099d5780610283565b661fffffffffffff19179392505050565b8035600381106103d657600080fd5b6000806000606084860312156109d1578283fd5b833592506109e1602085016109ae565b9150604084013590509250925092565b60008060008060808587031215610a06578081fd5b84359350610a16602086016109ae565b93969395505050506040820135916060013590565b600080600083850360a0811215610a40578384fd5b843593506060601f1982011215610a55578283fd5b506040516060810181811067ffffffffffffffff82111715610a7357fe5b604052610a82602086016109ae565b815260408581013560208301526060860135908201529295929450505060809091013590565b60008060008060808587031215610abd578384fd5b5050823594602084013594506040840135936060013592509050565b918252602082015260400190565b9081526020019056fea2646970667358221220bb94f6875a329b79922d3070278c0a5c639e779c0603cdf8d7dbab14da7a69d764736f6c63430007060033", "deployedSourceMap": "1379:9514:32:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1591:422;;;;;;:::i;:::-;;:::i;:::-;;;;;;;:::i;:::-;;;;;;;;3696:4132;;;;;;:::i;:::-;;:::i;8281:2610::-;;;;;;:::i;:::-;;:::i;:::-;;;;;;;;:::i;2113:593::-;;;;;;:::i;:::-;;:::i;1591:422::-;1761:7;1797:14;;;;;;;;;;;1821:63;1761:7;1830:18;1797:14;1830:16;:18::i;:::-;:22;6441:3:40;1821:8:32;:63::i;:::-;1895:22;1920:24;:6;1935:8;1920:14;:24::i;:::-;1895:49;;1961:45;1990:15;1961:28;:45::i;:::-;1954:52;1591:422;-1:-1:-1;;;;;;1591:422:32:o;3696:4132::-;3894:6;4003:69;4031:3;4012:15;:22;;6381:3:40;4003:8:32;:69::i;:::-;4082:18;4158:20;;;;;;;;;;;4103:15;:21;;;;4214:24;4158:20;4214:22;:24::i;:::-;4188:50;;4364:60;4391:1;4373:15;:19;6441:3:40;4364:8:32;:60::i;:::-;4458:10;4439:15;:29;4435:3387;;4903:28;;;;4990:30;:12;5011:8;4990:20;:30::i;:::-;:48;4952:34;:12;4977:8;4952:24;:34::i;:::-;:87;4945:94;;;;;;;;4435:3387;5310:20;5344:19;5366:18;:11;:16;:18::i;:::-;5486:20;5509;;;;;;;;;;;5344:40;;-1:-1:-1;5573:24:32;5509:20;5573:22;:24::i;:::-;5547:50;-1:-1:-1;5620:19:32;;5616:657;;899:4:30;5766:26:32;;5616:657;;;6191:1;6232:10;;;;;;;;;;;6113:11;;-1:-1:-1;6191:1:32;6232:22;;:20;:22::i;:::-;6214:40;;5616:657;6387:68;6415:10;6396:15;:29;;6499:3:40;6387:8:32;:68::i;:::-;4435:3387;;6572:12;6586;6602:65;6620:7;6629:10;6641:11;6654:12;6602:17;:65::i;:::-;6571:96;;;;6793:23;6838:16;:4;:14;:16::i;:::-;6819;:4;:14;:16::i;:::-;:35;;-1:-1:-1;6873:19:32;;6869:943;;7230:21;7283:26;:4;7300:8;7283:16;:26::i;:::-;7254;:4;7271:8;7254:16;:26::i;:::-;:55;7230:79;;7327:15;7358:16;:4;:14;:16::i;:::-;7345:10;:29;7327:47;;7473:15;7454:7;7430:14;:32;7429:60;;;;;;7399:26;7416:8;7399:4;:16;;:26;;;;:::i;:::-;:91;7392:98;;;;;;;;;;;;;;6869:943;7771:26;:4;7788:8;7771:16;:26::i;:::-;7764:33;;;;;;;;;;3696:4132;;;;;;;:::o;8281:2610::-;8464:12;;;-1:-1:-1;;9027:10:32;;8464:12;;;9414:1262;9428:4;9421:3;:11;9414:1262;;9538:1;9524:10;;;9523:16;9680:28;9523:16;9701:6;9680:20;:28::i;:::-;9731:12;;;;;;;;;;;;9674:34;;-1:-1:-1;9731:12:32;-1:-1:-1;9775:18:32;9731:12;9775:16;:18::i;:::-;9757:36;;9830:10;9812:15;:28;9808:858;;;9980:16;9999:1;9980:20;9974:26;;9808:858;;;10043:10;10025:15;:28;10021:645;;;10448:1;10429:16;:20;10422:27;;10021:645;;;10636:6;10644;10628:23;;;;;;;;;;;;10021:645;9414:1262;;;;10810:10;10792:15;:28;:92;;10856:7;:19;10864:10;:3;:8;:10::i;:::-;10856:19;;;;;;;;;;;;10877:6;10792:92;;;10824:6;10832:7;:19;10840:10;:3;:8;:10::i;:::-;10832:19;;;;;;;;;;;;10792:92;10785:99;;;;;;;;;8281:2610;;;;;;;;:::o;2113:593::-;2310:7;2329:49;2338:5;:10;;;2352:1;2338:15;;6610:3:40;2329:8:32;:49::i;:::-;2389:23;2415:80;2434:7;2443:5;:14;;;2459:11;2484:5;:10;;;2472:5;:9;;;:22;2415:18;:80::i;:::-;2389:106;;2505:21;2529:67;2548:7;2557:5;:14;;;2573:11;2586:5;:9;;;2529:18;:67::i;:::-;2505:91;;2613:86;2687:5;:10;;;2660:16;2643:14;:33;2642:56;;;;;;2613:28;:86::i;5583:129:33:-;5641:7;5667:38;:6;5641:7;5667:19;:38::i;:::-;5660:45;;5583:129;;;;:::o;866:101:40:-;935:9;930:34;;946:18;954:9;946:7;:18::i;:::-;866:101;;:::o;4515:452:33:-;4603:6;;4625:8;:44;;;;;;;;;4621:340;;;4692:25;4710:6;4692:17;:25::i;:::-;4685:32;;;;4621:340;4750:31;4738:8;:43;;;;;;;;;4734:227;;;4804:24;4821:6;4804:16;:24::i;4734:227::-;4925:25;4943:6;4925:17;:25::i;4734:227::-;4515:452;;;;:::o;2590:149:47:-;2650:7;2684:47;1259:4;2699:5;:31;2684:14;:47::i;5066:453:33:-;5158:6;;5180:8;:44;;;;;;;;;5176:337;;;5247:24;5264:6;5247:16;:24::i;5176:337::-;5304:31;5292:8;:43;;;;;;;;;5288:225;;;5358:23;5374:6;5358:15;:23::i;5288:225::-;5478:24;5495:6;5478:16;:24::i;1205:98:30:-;1257:7;1283:13;1287:5;1294:1;1418:123;1485:7;899:4;1512:14;;;1511:23;;;1418:123;-1:-1:-1;;;1418:123:30:o;1006:98::-;1058:7;1084:13;1088:5;1095:1;1084:3;:13::i;11062:142:49:-;11171:14;2439:11;11163:34;;11062:142::o;1074:3172:40:-;-1:-1:-1;;;3588:3:40;3581:79;;;3799:66;3793:4;3786:80;3941:1;3935:4;3928:15;2999:73;2210:2;2243:18;;;2288;;;2215:4;2284:29;;;3040:1;3036:14;2195:18;;;;3025:26;;;;2336:18;;;;2383;;;2379:29;;;3057:2;3053:17;3021:50;;;;2999:73;2994:3;2990:83;4008:4;4001:26;4234:3;;4224:14;5816:144:33;5881:6;5906:47;:6;2923:3;5906:18;:47::i;6306:142::-;6370:6;6395:46;:6;2794:3;6395:18;:46::i;6791:143::-;6856:6;6881:46;:6;2668:2;6881:18;:46::i;7271:5379:51:-;7317:6;7335:89;-1:-1:-1;;7344:1:51;:25;;:54;;;;;2720:6;7373:1;:25;;7344:54;4775:1:40;7335:8:51;:89::i;:::-;7443:1;7439;:5;7435:353;;;7769:7;7774:1;7773:2;;7769:3;:7::i;:::-;7750:15;7749:27;;;;;;7741:36;;;;7435:353;9089:14;3158:21;9117:1;:7;9113:220;;-1:-1:-1;;;9140:7:51;;;;3214:56;9113:220;;;3322:20;9194:1;:7;9190:143;;-1:-1:-1;;;9217:7:51;;;;3377:28;9190:143;;;-1:-1:-1;9291:1:51;9190:143;9488:3;9483:8;;;;;2125:4;3486:22;9742:7;;9738:92;;-1:-1:-1;;9765:7:51;;;;2125:4;3543:34;9797:12;;9796:23;9786:33;;9738:92;3615:22;9843:1;:7;9839:92;;-1:-1:-1;;9866:7:51;;;;2125:4;3672:27;9898:12;;9897:23;9887:33;;9839:92;3737:21;9944:1;:7;9940:92;;-1:-1:-1;;9967:7:51;;;;2125:4;3793:24;9999:12;;9998:23;9988:33;;9940:92;3855:21;10045:1;:7;10041:92;;-1:-1:-1;;10068:7:51;;;;2125:4;3911:22;10100:12;;10099:23;10089:33;;10041:92;3971:21;10146:1;:7;10142:92;;-1:-1:-1;;10169:7:51;;;;2125:4;4027:21;10201:12;;10200:23;10190:33;;10142:92;4086:21;10247:1;:7;10243:92;;-1:-1:-1;;10270:7:51;;;;4086:21;4142;10302:12;;10301:23;10291:33;;10243:92;4201:20;10348:1;:7;10344:92;;-1:-1:-1;;10371:7:51;;;;2125:4;4257:21;10403:12;;10402:23;10392:33;;10344:92;4316:20;10449:1;:7;10445:92;;-1:-1:-1;;10472:7:51;;;;2125:4;4372:21;10504:12;;10503:23;10493:33;;10445:92;2125:4;11069:17;;;;;;11354:1;;11332:8;;;11331:19;11330:25;11365:17;;;;11330:25;-1:-1:-1;11424:1:51;2125:4;11402:8;;;11401:19;11400:25;11435:17;;;;11400:25;-1:-1:-1;11494:1:51;2125:4;11472:8;;;11471:19;11470:25;11505:17;;;;11470:25;-1:-1:-1;11564:1:51;2125:4;11542:8;;;11541:19;11540:25;11575:17;;;;11540:25;-1:-1:-1;11634:1:51;2125:4;11612:8;;;11611:19;11610:25;11645:17;;;;11610:25;-1:-1:-1;11704:1:51;2125:4;11682:8;;;11681:19;11680:25;11715:17;;;;11680:25;-1:-1:-1;11774:1:51;2125:4;11752:8;;;11751:19;11750:25;11785:17;;;;11750:25;-1:-1:-1;11844:1:51;2125:4;11822:8;;;11821:19;11820:25;11855:17;;;;11820:25;-1:-1:-1;11914:2:51;2125:4;11892:8;;;11891:19;11890:26;11926:17;;;;11890:26;-1:-1:-1;11985:2:51;2125:4;11963:8;;;11962:19;11961:26;11997:17;;;;11961:26;-1:-1:-1;12056:2:51;2125:4;12034:8;;;12033:19;12032:26;12068:17;;;;12032:26;-1:-1:-1;12640:3:51;2125:4;12596:19;;;12595:30;12594:42;;12593:50;;7271:5379;-1:-1:-1;;;;;;7271:5379:51:o;6061:142:33:-;6125:6;6150:46;:6;2858:3;6150:18;:46::i;6548:140::-;6611:6;6636:45;:6;2730:3;6636:18;:45::i;7034:141::-;7098:6;7123:45;:6;2605:2;7123:18;:45::i;1657:130:30:-;1724:7;899:4;1751:21;;;;;1750:30;;12135:487:49;12209:6;12257:14;;;2386:11;12249:34;2846:11;12558:19;;:57;;12610:5;12558:57;;;-1:-1:-1;;12581:25:49;;12551:64;-1:-1:-1;;;12135:487:49:o;12743:488::-;12817:6;12865:14;;;2545:11;12857:34;2901:11;13167:19;;:57;;13219:5;13167:57;;;-1:-1:-1;;13190:25:49;;12743:488;-1:-1:-1;;;12743:488:49:o;14:152:68:-;91:20;;140:1;130:12;;120:2;;156:1;153;146:12;171:380;;;;356:2;344:9;335:7;331:23;327:32;324:2;;;377:6;369;362:22;324:2;418:9;405:23;395:33;;447:47;490:2;479:9;475:18;447:47;:::i;:::-;437:57;;541:2;530:9;526:18;513:32;503:42;;314:237;;;;;:::o;556:449::-;;;;;758:3;746:9;737:7;733:23;729:33;726:2;;;780:6;772;765:22;726:2;821:9;808:23;798:33;;850:47;893:2;882:9;878:18;850:47;:::i;:::-;716:289;;840:57;;-1:-1:-1;;;;944:2:68;929:18;;916:32;;995:2;980:18;967:32;;716:289::o;1010:852::-;;;;1209:9;1200:7;1196:23;1239:3;1235:2;1231:12;1228:2;;;1261:6;1253;1246:22;1228:2;1289:23;;;-1:-1:-1;1346:4:68;-1:-1:-1;;1328:16:68;;1324:27;1321:2;;;1369:6;1361;1354:22;1321:2;;1407;1401:9;1449:4;1441:6;1437:17;1520:6;1508:10;1505:22;1484:18;1472:10;1469:34;1466:62;1463:2;;;1531:9;1463:2;1558;1551:22;1597:47;1640:2;1625:18;;1597:47;:::i;:::-;1582:63;;1706:2;1691:18;;;1678:32;1673:2;1661:15;;1654:57;1772:4;1757:20;;1744:34;1727:15;;;1720:59;1176:686;;1589:6;;-1:-1:-1;;;1851:3:68;1836:19;;;1823:33;;1176:686::o;1867:420::-;;;;;2055:3;2043:9;2034:7;2030:23;2026:33;2023:2;;;2077:6;2069;2062:22;2023:2;-1:-1:-1;;2105:23:68;;;2175:2;2160:18;;2147:32;;-1:-1:-1;2226:2:68;2211:18;;2198:32;;2277:2;2262:18;2249:32;;-1:-1:-1;2013:274:68;-1:-1:-1;2013:274:68:o;2292:256::-;2474:25;;;2530:2;2515:18;;2508:34;2462:2;2447:18;;2429:119::o;2553:183::-;2705:25;;;2693:2;2678:18;;2660:76::o", "language": "Solidity", "natspec": {"details": "Auxiliary library for PoolPriceOracle, offloading most of the query code to reduce bytecode size by using this as a linked library. The downside is an extra DELEGATECALL is added (2600 gas as of the Berlin hardfork), but the bytecode size gains are so big (specially of the oracle contract does not use `LogCompression.fromLowResLog`) that it is worth it.", "kind": "dev", "methods": {"findNearestSample(mapping(uint256 => bytes32) storage,uint256,uint256,uint256)": {"details": "Finds the two samples with timestamps before and after `lookUpDate`. If one of the samples matches exactly, both `prev` and `next` will be it. `offset` is the index of the oldest sample in the buffer. `length` is the size of the samples list. Assumes `lookUpDate` is greater or equal than the timestamp of the oldest sample, and less or equal than the timestamp of the latest sample."}, "getInstantValue(mapping(uint256 => bytes32) storage,IPriceOracle.Variable,uint256)": {"details": "Returns the value for `variable` at the indexed sample."}, "getPastAccumulator(mapping(uint256 => bytes32) storage,IPriceOracle.Variable,uint256,uint256)": {"details": "Returns the value of the accumulator for `variable` `ago` seconds ago. `latestIndex` must be the index of the latest sample in the buffer. Reverts under the following conditions:  - if the buffer is empty.  - if querying past information and the buffer has not been fully initialized.  - if querying older information than available in the buffer. Note that a full buffer guarantees queries for the    past 34 hours will not revert. If requesting information for a timestamp later than the latest one, it is extrapolated using the latest available data. When no exact information is available for the requested past timestamp (as usually happens, since at most one timestamp is stored every two minutes), it is estimated by performing linear interpolation using the closest values. This process is guaranteed to complete performing at most 10 storage reads."}, "getTimeWeightedAverage(mapping(uint256 => bytes32) storage,IPriceOracle.OracleAverageQuery,uint256)": {"details": "Returns the time average weighted price corresponding to `query`."}}, "version": 1}, "offset": [1379, 10893], "opcodes": "PUSH20 0x0 ADDRESS EQ PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x4 CALLDATASIZE LT PUSH2 0x56 JUMPI PUSH1 0x0 CALLDATALOAD PUSH1 0xE0 SHR DUP1 PUSH4 0x397BEE0 EQ PUSH2 0x5B JUMPI DUP1 PUSH4 0x34171A85 EQ PUSH2 0x84 JUMPI DUP1 PUSH4 0x3D60FB0A EQ PUSH2 0x97 JUMPI DUP1 PUSH4 0x79EAEF82 EQ PUSH2 0xB8 JUMPI JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH2 0x6E PUSH2 0x69 CALLDATASIZE PUSH1 0x4 PUSH2 0x9BD JUMP JUMPDEST PUSH2 0xCB JUMP JUMPDEST PUSH1 0x40 MLOAD PUSH2 0x7B SWAP2 SWAP1 PUSH2 0xAE7 JUMP JUMPDEST PUSH1 0x40 MLOAD DUP1 SWAP2 SUB SWAP1 RETURN JUMPDEST PUSH2 0x6E PUSH2 0x92 CALLDATASIZE PUSH1 0x4 PUSH2 0x9F1 JUMP JUMPDEST PUSH2 0x111 JUMP JUMPDEST PUSH2 0xAA PUSH2 0xA5 CALLDATASIZE PUSH1 0x4 PUSH2 0xAA8 JUMP JUMPDEST PUSH2 0x28B JUMP JUMPDEST PUSH1 0x40 MLOAD PUSH2 0x7B SWAP3 SWAP2 SWAP1 PUSH2 0xAD9 JUMP JUMPDEST PUSH2 0x6E PUSH2 0xC6 CALLDATASIZE PUSH1 0x4 PUSH2 0xA2B JUMP JUMPDEST PUSH2 0x363 JUMP JUMPDEST PUSH1 0x0 DUP2 DUP2 MSTORE PUSH1 0x20 DUP5 SWAP1 MSTORE PUSH1 0x40 DUP2 KECCAK256 SLOAD PUSH2 0xF0 DUP3 PUSH2 0xE7 DUP4 PUSH2 0x3C7 JUMP JUMPDEST GT PUSH2 0x139 PUSH2 0x3DB JUMP JUMPDEST PUSH1 0x0 PUSH2 0xFC DUP3 DUP7 PUSH2 0x3ED JUMP JUMPDEST SWAP1 POP PUSH2 0x107 DUP2 PUSH2 0x43E JUMP JUMPDEST SWAP7 SWAP6 POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 PUSH2 0x122 DUP3 TIMESTAMP LT ISZERO PUSH2 0x138 PUSH2 0x3DB JUMP JUMPDEST PUSH1 0x0 DUP4 DUP2 MSTORE PUSH1 0x20 DUP7 SWAP1 MSTORE PUSH1 0x40 DUP2 KECCAK256 SLOAD TIMESTAMP DUP5 SWAP1 SUB SWAP2 PUSH2 0x13F DUP3 PUSH2 0x3C7 JUMP JUMPDEST SWAP1 POP PUSH2 0x150 PUSH1 0x0 DUP3 GT PUSH2 0x139 PUSH2 0x3DB JUMP JUMPDEST DUP3 DUP2 GT PUSH2 0x17C JUMPI DUP1 DUP4 SUB DUP1 PUSH2 0x165 DUP5 DUP11 PUSH2 0x3ED JUMP JUMPDEST MUL PUSH2 0x170 DUP5 DUP11 PUSH2 0x451 JUMP JUMPDEST ADD SWAP5 POP POP POP POP POP PUSH2 0x283 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH2 0x188 DUP9 PUSH2 0x495 JUMP JUMPDEST PUSH1 0x0 DUP2 DUP2 MSTORE PUSH1 0x20 DUP13 SWAP1 MSTORE PUSH1 0x40 DUP2 KECCAK256 SLOAD SWAP2 SWAP3 POP PUSH2 0x1A3 DUP3 PUSH2 0x3C7 JUMP JUMPDEST SWAP1 POP DUP1 ISZERO PUSH2 0x1B5 JUMPI PUSH2 0x400 SWAP4 POP PUSH2 0x1D4 JUMP JUMPDEST PUSH1 0x0 DUP1 DUP1 MSTORE PUSH1 0x20 DUP14 SWAP1 MSTORE PUSH1 0x40 DUP2 KECCAK256 SLOAD SWAP4 SWAP5 POP SWAP3 PUSH2 0x1D1 SWAP1 PUSH2 0x3C7 JUMP JUMPDEST SWAP1 POP JUMPDEST PUSH2 0x1E3 DUP8 DUP3 GT ISZERO PUSH2 0x13A PUSH2 0x3DB JUMP JUMPDEST POP POP PUSH1 0x0 DUP1 PUSH2 0x1F4 DUP13 DUP9 DUP6 DUP8 PUSH2 0x28B JUMP JUMPDEST SWAP2 POP SWAP2 POP PUSH1 0x0 PUSH2 0x203 DUP4 PUSH2 0x3C7 JUMP JUMPDEST PUSH2 0x20C DUP4 PUSH2 0x3C7 JUMP JUMPDEST SUB SWAP1 POP DUP1 ISZERO PUSH2 0x26E JUMPI PUSH1 0x0 PUSH2 0x221 DUP5 DUP15 PUSH2 0x451 JUMP JUMPDEST PUSH2 0x22B DUP5 DUP16 PUSH2 0x451 JUMP JUMPDEST SUB SWAP1 POP PUSH1 0x0 PUSH2 0x239 DUP6 PUSH2 0x3C7 JUMP JUMPDEST DUP11 SUB SWAP1 POP DUP3 DUP2 DUP4 MUL DUP2 PUSH2 0x248 JUMPI INVALID JUMPDEST SDIV PUSH2 0x25C DUP16 DUP8 PUSH2 0x451 SWAP1 SWAP2 SWAP1 PUSH4 0xFFFFFFFF AND JUMP JUMPDEST ADD SWAP11 POP POP POP POP POP POP POP POP POP POP POP PUSH2 0x283 JUMP JUMPDEST PUSH2 0x278 DUP4 DUP14 PUSH2 0x451 JUMP JUMPDEST SWAP9 POP POP POP POP POP POP POP POP POP JUMPDEST SWAP5 SWAP4 POP POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 DUP1 PUSH1 0x0 NOT DUP5 ADD DUP2 DUP1 DUP1 JUMPDEST DUP4 DUP6 GT PUSH2 0x30B JUMPI PUSH1 0x2 DUP6 DUP6 ADD DIV PUSH2 0x2AF DUP2 DUP12 PUSH2 0x49E JUMP JUMPDEST PUSH1 0x0 DUP2 DUP2 MSTORE PUSH1 0x20 DUP15 SWAP1 MSTORE PUSH1 0x40 SWAP1 KECCAK256 SLOAD SWAP1 SWAP5 POP SWAP3 POP PUSH2 0x2CC DUP4 PUSH2 0x3C7 JUMP JUMPDEST SWAP2 POP DUP11 DUP3 LT ISZERO PUSH2 0x2E1 JUMPI DUP1 PUSH1 0x1 ADD SWAP6 POP PUSH2 0x305 JUMP JUMPDEST DUP11 DUP3 GT ISZERO PUSH2 0x2F4 JUMPI PUSH1 0x1 DUP2 SUB SWAP5 POP PUSH2 0x305 JUMP JUMPDEST DUP3 DUP4 SWAP8 POP SWAP8 POP POP POP POP POP POP POP PUSH2 0x35A JUMP JUMPDEST POP PUSH2 0x298 JUMP JUMPDEST DUP10 DUP2 LT PUSH2 0x333 JUMPI DUP11 PUSH1 0x0 PUSH2 0x31E DUP6 PUSH2 0x4AF JUMP JUMPDEST DUP2 MSTORE PUSH1 0x20 ADD SWAP1 DUP2 MSTORE PUSH1 0x20 ADD PUSH1 0x0 KECCAK256 SLOAD DUP3 PUSH2 0x350 JUMP JUMPDEST DUP2 DUP12 PUSH1 0x0 PUSH2 0x340 DUP7 PUSH2 0x495 JUMP JUMPDEST DUP2 MSTORE PUSH1 0x20 ADD SWAP1 DUP2 MSTORE PUSH1 0x20 ADD PUSH1 0x0 KECCAK256 SLOAD JUMPDEST SWAP7 POP SWAP7 POP POP POP POP POP POP JUMPDEST SWAP5 POP SWAP5 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 PUSH2 0x379 DUP4 PUSH1 0x20 ADD MLOAD PUSH1 0x0 EQ ISZERO PUSH2 0x13C PUSH2 0x3DB JUMP JUMPDEST PUSH1 0x0 PUSH2 0x395 DUP6 DUP6 PUSH1 0x0 ADD MLOAD DUP6 DUP8 PUSH1 0x20 ADD MLOAD DUP9 PUSH1 0x40 ADD MLOAD ADD PUSH2 0x111 JUMP JUMPDEST SWAP1 POP PUSH1 0x0 PUSH2 0x3AD DUP7 DUP7 PUSH1 0x0 ADD MLOAD DUP7 DUP9 PUSH1 0x40 ADD MLOAD PUSH2 0x111 JUMP JUMPDEST SWAP1 POP PUSH2 0x107 DUP6 PUSH1 0x20 ADD MLOAD DUP4 DUP4 SUB DUP2 PUSH2 0x3C1 JUMPI INVALID JUMPDEST SDIV PUSH2 0x43E JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 DUP3 PUSH2 0x4BC JUMP JUMPDEST SWAP1 POP JUMPDEST SWAP2 SWAP1 POP JUMP JUMPDEST DUP2 PUSH2 0x3E9 JUMPI PUSH2 0x3E9 DUP2 PUSH2 0x4C6 JUMP JUMPDEST POP POP JUMP JUMPDEST PUSH1 0x0 DUP1 DUP3 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x3FC JUMPI INVALID JUMPDEST EQ ISZERO PUSH2 0x412 JUMPI PUSH2 0x40B DUP4 PUSH2 0x519 JUMP JUMPDEST SWAP1 POP PUSH2 0x438 JUMP JUMPDEST PUSH1 0x1 DUP3 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x420 JUMPI INVALID JUMPDEST EQ ISZERO PUSH2 0x42F JUMPI PUSH2 0x40B DUP4 PUSH2 0x526 JUMP JUMPDEST PUSH2 0x40B DUP4 PUSH2 0x533 JUMP JUMPDEST SWAP3 SWAP2 POP POP JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 PUSH6 0x5AF3107A4000 DUP4 MUL PUSH2 0x540 JUMP JUMPDEST PUSH1 0x0 DUP1 DUP3 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x460 JUMPI INVALID JUMPDEST EQ ISZERO PUSH2 0x46F JUMPI PUSH2 0x40B DUP4 PUSH2 0x91E JUMP JUMPDEST PUSH1 0x1 DUP3 PUSH1 0x2 DUP2 GT ISZERO PUSH2 0x47D JUMPI INVALID JUMPDEST EQ ISZERO PUSH2 0x48C JUMPI PUSH2 0x40B DUP4 PUSH2 0x92B JUMP JUMPDEST PUSH2 0x40B DUP4 PUSH2 0x938 JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0x1 JUMPDEST PUSH1 0x0 PUSH2 0x400 DUP4 DUP4 ADD JUMPDEST MOD SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0x1 PUSH2 0x945 JUMP JUMPDEST SHR PUSH4 0x7FFFFFFF AND SWAP1 JUMP JUMPDEST PUSH3 0x461BCD PUSH1 0xE5 SHL PUSH1 0x0 SWAP1 DUP2 MSTORE PUSH1 0x20 PUSH1 0x4 MSTORE PUSH1 0x7 PUSH1 0x24 MSTORE PUSH7 0x42414C23000030 PUSH1 0xA DUP1 DUP5 DIV DUP2 DUP2 MOD PUSH1 0x30 SWAP1 DUP2 ADD PUSH1 0x8 SHL SWAP6 DUP4 SWAP1 MOD SWAP6 SWAP1 SWAP6 ADD SWAP1 DUP3 SWAP1 DIV SWAP2 DUP3 MOD SWAP1 SWAP5 ADD PUSH1 0x10 SHL SWAP4 SWAP1 SWAP4 ADD ADD PUSH1 0xC8 SHL PUSH1 0x44 MSTORE PUSH1 0x64 SWAP1 REVERT JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0xEA PUSH2 0x954 JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0x9F PUSH2 0x954 JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0x54 PUSH2 0x954 JUMP JUMPDEST PUSH1 0x0 PUSH2 0x56F PUSH9 0x238FD42C5CF03FFFF NOT DUP4 SLT ISZERO DUP1 ISZERO PUSH2 0x568 JUMPI POP PUSH9 0x70C1CC73B00C80000 DUP4 SGT ISZERO JUMPDEST PUSH1 0x9 PUSH2 0x3DB JUMP JUMPDEST PUSH1 0x0 DUP3 SLT ISZERO PUSH2 0x5A3 JUMPI PUSH2 0x584 DUP3 PUSH1 0x0 SUB PUSH2 0x540 JUMP JUMPDEST PUSH15 0xC097CE7BC90715B34B9F1000000000 DUP2 PUSH2 0x59B JUMPI INVALID JUMPDEST SDIV SWAP1 POP PUSH2 0x3D6 JUMP JUMPDEST PUSH1 0x0 PUSH9 0x6F05B59D3B2000000 DUP4 SLT PUSH2 0x5E3 JUMPI POP PUSH9 0x6F05B59D3B1FFFFFF NOT SWAP1 SWAP2 ADD SWAP1 PUSH24 0x195E54C5DD42177F53A27172FA9EC630262827000000000 PUSH2 0x619 JUMP JUMPDEST PUSH9 0x3782DACE9D9000000 DUP4 SLT PUSH2 0x615 JUMPI POP PUSH9 0x3782DACE9D8FFFFFF NOT SWAP1 SWAP2 ADD SWAP1 PUSH12 0x1425982CF597CD205CEF7380 PUSH2 0x619 JUMP JUMPDEST POP PUSH1 0x1 JUMPDEST PUSH1 0x64 SWAP3 SWAP1 SWAP3 MUL SWAP2 PUSH9 0x56BC75E2D63100000 PUSH9 0xAD78EBC5AC62000000 DUP5 SLT PUSH2 0x669 JUMPI PUSH9 0xAD78EBC5AC61FFFFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH15 0x1855144814A7FF805980FF0084000 DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0x56BC75E2D631000000 DUP5 SLT PUSH2 0x6A5 JUMPI PUSH9 0x56BC75E2D630FFFFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH12 0x2DF0AB5A80A22C61AB5A700 DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0x2B5E3AF16B18800000 DUP5 SLT PUSH2 0x6DF JUMPI PUSH9 0x2B5E3AF16B187FFFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH10 0x3F1FCE3DA636EA5CF850 DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0x15AF1D78B58C400000 DUP5 SLT PUSH2 0x719 JUMPI PUSH9 0x15AF1D78B58C3FFFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH10 0x127FA27722CC06CC5E2 DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0xAD78EBC5AC6200000 DUP5 SLT PUSH2 0x752 JUMPI PUSH9 0xAD78EBC5AC61FFFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH9 0x280E60114EDB805D03 DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0x56BC75E2D63100000 DUP5 SLT PUSH2 0x78B JUMPI PUSH9 0x56BC75E2D630FFFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH9 0xEBC5FB41746121110 DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0x2B5E3AF16B1880000 DUP5 SLT PUSH2 0x7C4 JUMPI PUSH9 0x2B5E3AF16B187FFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH9 0x8F00F760A4B2DB55D DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0x15AF1D78B58C40000 DUP5 SLT PUSH2 0x7FD JUMPI PUSH9 0x15AF1D78B58C3FFFF NOT SWAP1 SWAP4 ADD SWAP3 PUSH9 0x56BC75E2D63100000 PUSH9 0x6F5F1775788937937 DUP3 MUL SDIV SWAP1 POP JUMPDEST PUSH9 0x56BC75E2D63100000 DUP5 DUP2 ADD SWAP1 DUP6 SWAP1 PUSH1 0x2 SWAP1 DUP3 DUP1 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x3 PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x4 PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x5 PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x6 PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x7 PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x8 PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x9 PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0xA PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0xB PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0xC PUSH9 0x56BC75E2D63100000 DUP8 DUP4 MUL SDIV SDIV SWAP2 DUP3 ADD SWAP2 SWAP1 POP PUSH1 0x64 PUSH9 0x56BC75E2D63100000 DUP5 DUP5 MUL SDIV DUP6 MUL SDIV SWAP7 SWAP6 POP POP POP POP POP POP JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0xB5 PUSH2 0x97B JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0x6A PUSH2 0x97B JUMP JUMPDEST PUSH1 0x0 PUSH2 0x3D3 DUP3 PUSH1 0x1F PUSH2 0x97B JUMP JUMPDEST PUSH1 0x0 PUSH2 0x400 DUP3 DUP5 SUB DUP2 ADD PUSH2 0x4A7 JUMP JUMPDEST PUSH1 0x0 DUP3 DUP3 SHR PUSH3 0x3FFFFF AND PUSH3 0x1FFFFF DUP2 SGT PUSH2 0x96E JUMPI DUP1 PUSH2 0x283 JUMP JUMPDEST PUSH3 0x3FFFFF NOT OR SWAP4 SWAP3 POP POP POP JUMP JUMPDEST PUSH1 0x0 DUP3 DUP3 SHR PUSH7 0x1FFFFFFFFFFFFF AND PUSH7 0xFFFFFFFFFFFFF DUP2 SGT PUSH2 0x99D JUMPI DUP1 PUSH2 0x283 JUMP JUMPDEST PUSH7 0x1FFFFFFFFFFFFF NOT OR SWAP4 SWAP3 POP POP POP JUMP JUMPDEST DUP1 CALLDATALOAD PUSH1 0x3 DUP2 LT PUSH2 0x3D6 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 PUSH1 0x60 DUP5 DUP7 SUB SLT ISZERO PUSH2 0x9D1 JUMPI DUP3 DUP4 REVERT JUMPDEST DUP4 CALLDATALOAD SWAP3 POP PUSH2 0x9E1 PUSH1 0x20 DUP6 ADD PUSH2 0x9AE JUMP JUMPDEST SWAP2 POP PUSH1 0x40 DUP5 ADD CALLDATALOAD SWAP1 POP SWAP3 POP SWAP3 POP SWAP3 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x80 DUP6 DUP8 SUB SLT ISZERO PUSH2 0xA06 JUMPI DUP1 DUP2 REVERT JUMPDEST DUP5 CALLDATALOAD SWAP4 POP PUSH2 0xA16 PUSH1 0x20 DUP7 ADD PUSH2 0x9AE JUMP JUMPDEST SWAP4 SWAP7 SWAP4 SWAP6 POP POP POP POP PUSH1 0x40 DUP3 ADD CALLDATALOAD SWAP2 PUSH1 0x60 ADD CALLDATALOAD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP4 DUP6 SUB PUSH1 0xA0 DUP2 SLT ISZERO PUSH2 0xA40 JUMPI DUP4 DUP5 REVERT JUMPDEST DUP5 CALLDATALOAD SWAP4 POP PUSH1 0x60 PUSH1 0x1F NOT DUP3 ADD SLT ISZERO PUSH2 0xA55 JUMPI DUP3 DUP4 REVERT JUMPDEST POP PUSH1 0x40 MLOAD PUSH1 0x60 DUP2 ADD DUP2 DUP2 LT PUSH8 0xFFFFFFFFFFFFFFFF DUP3 GT OR ISZERO PUSH2 0xA73 JUMPI INVALID JUMPDEST PUSH1 0x40 MSTORE PUSH2 0xA82 PUSH1 0x20 DUP7 ADD PUSH2 0x9AE JUMP JUMPDEST DUP2 MSTORE PUSH1 0x40 DUP6 DUP2 ADD CALLDATALOAD PUSH1 0x20 DUP4 ADD MSTORE PUSH1 0x60 DUP7 ADD CALLDATALOAD SWAP1 DUP3 ADD MSTORE SWAP3 SWAP6 SWAP3 SWAP5 POP POP POP PUSH1 0x80 SWAP1 SWAP2 ADD CALLDATALOAD SWAP1 JUMP JUMPDEST PUSH1 0x0 DUP1 PUSH1 0x0 DUP1 PUSH1 0x80 DUP6 DUP8 SUB SLT ISZERO PUSH2 0xABD JUMPI DUP4 DUP5 REVERT JUMPDEST POP POP DUP3 CALLDATALOAD SWAP5 PUSH1 0x20 DUP5 ADD CALLDATALOAD SWAP5 POP PUSH1 0x40 DUP5 ADD CALLDATALOAD SWAP4 PUSH1 0x60 ADD CALLDATALOAD SWAP3 POP SWAP1 POP JUMP JUMPDEST SWAP2 DUP3 MSTORE PUSH1 0x20 DUP3 ADD MSTORE PUSH1 0x40 ADD SWAP1 JUMP JUMPDEST SWAP1 DUP2 MSTORE PUSH1 0x20 ADD SWAP1 JUMP INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 0xBB SWAP5 0xF6 DUP8 GAS ORIGIN SWAP12 PUSH26 0x922D3070278C0A5C639E779C0603CDF8D7DBAB14DA7A69D76473 PUSH16 0x6C634300070600330000000000000000 ", "sha1": "bc05072028a7efd71c4f4051a8c45ec6be4811a2", "source": "// SPDX-License-Identifier: GPL-3.0-or-later\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\npragma solidity ^0.7.0;\npragma experimental ABIEncoderV2;\n\nimport \"@balancer-labs/v2-solidity-utils/contracts/helpers/BalancerErrors.sol\";\nimport \"@balancer-labs/v2-solidity-utils/contracts/helpers/LogCompression.sol\";\n\nimport \"../interfaces/IPriceOracle.sol\";\n\nimport \"./Buffer.sol\";\nimport \"./Samples.sol\";\n\n/**\n * @dev Auxiliary library for PoolPriceOracle, offloading most of the query code to reduce bytecode size by using this\n * as a linked library. The downside is an extra DELEGATECALL is added (2600 gas as of the Berlin hardfork), but the\n * bytecode size gains are so big (specially of the oracle contract does not use `LogCompression.fromLowResLog`) that\n * it is worth it.\n */\nlibrary QueryProcessor {\n    using Buffer for uint256;\n    using Samples for bytes32;\n    using LogCompression for int256;\n\n    /**\n     * @dev Returns the value for `variable` at the indexed sample.\n     */\n    function getInstantValue(\n        mapping(uint256 => bytes32) storage samples,\n        IPriceOracle.Variable variable,\n        uint256 index\n    ) external view returns (uint256) {\n        bytes32 sample = samples[index];\n        _require(sample.timestamp() > 0, Errors.ORACLE_NOT_INITIALIZED);\n\n        int256 rawInstantValue = sample.instant(variable);\n        return LogCompression.fromLowResLog(rawInstantValue);\n    }\n\n    /**\n     * @dev Returns the time average weighted price corresponding to `query`.\n     */\n    function getTimeWeightedAverage(\n        mapping(uint256 => bytes32) storage samples,\n        IPriceOracle.OracleAverageQuery memory query,\n        uint256 latestIndex\n    ) external view returns (uint256) {\n        _require(query.secs != 0, Errors.ORACLE_BAD_SECS);\n\n        int256 beginAccumulator = getPastAccumulator(samples, query.variable, latestIndex, query.ago + query.secs);\n        int256 endAccumulator = getPastAccumulator(samples, query.variable, latestIndex, query.ago);\n        return LogCompression.fromLowResLog((endAccumulator - beginAccumulator) / int256(query.secs));\n    }\n\n    /**\n     * @dev Returns the value of the accumulator for `variable` `ago` seconds ago. `latestIndex` must be the index of\n     * the latest sample in the buffer.\n     *\n     * Reverts under the following conditions:\n     *  - if the buffer is empty.\n     *  - if querying past information and the buffer has not been fully initialized.\n     *  - if querying older information than available in the buffer. Note that a full buffer guarantees queries for the\n     *    past 34 hours will not revert.\n     *\n     * If requesting information for a timestamp later than the latest one, it is extrapolated using the latest\n     * available data.\n     *\n     * When no exact information is available for the requested past timestamp (as usually happens, since at most one\n     * timestamp is stored every two minutes), it is estimated by performing linear interpolation using the closest\n     * values. This process is guaranteed to complete performing at most 10 storage reads.\n     */\n    function getPastAccumulator(\n        mapping(uint256 => bytes32) storage samples,\n        IPriceOracle.Variable variable,\n        uint256 latestIndex,\n        uint256 ago\n    ) public view returns (int256) {\n        // solhint-disable not-rely-on-time\n        // `ago` must not be before the epoch.\n        _require(block.timestamp >= ago, Errors.ORACLE_INVALID_SECONDS_QUERY);\n        uint256 lookUpTime = block.timestamp - ago;\n\n        bytes32 latestSample = samples[latestIndex];\n        uint256 latestTimestamp = latestSample.timestamp();\n\n        // The latest sample only has a non-zero timestamp if no data was ever processed and stored in the buffer.\n        _require(latestTimestamp > 0, Errors.ORACLE_NOT_INITIALIZED);\n\n        if (latestTimestamp <= lookUpTime) {\n            // The accumulator at times ahead of the latest one are computed by extrapolating the latest data. This is\n            // equivalent to the instant value not changing between the last timestamp and the look up time.\n\n            // We can use unchecked arithmetic since the accumulator can be represented in 53 bits, timestamps in 31\n            // bits, and the instant value in 22 bits.\n            uint256 elapsed = lookUpTime - latestTimestamp;\n            return latestSample.accumulator(variable) + (latestSample.instant(variable) * int256(elapsed));\n        } else {\n            // The look up time is before the latest sample, but we need to make sure that it is not before the oldest\n            // sample as well.\n\n            // Since we use a circular buffer, the oldest sample is simply the next one.\n            uint256 bufferLength;\n            uint256 oldestIndex = latestIndex.next();\n            {\n                // Local scope used to prevent stack-too-deep errors.\n                bytes32 oldestSample = samples[oldestIndex];\n                uint256 oldestTimestamp = oldestSample.timestamp();\n\n                if (oldestTimestamp > 0) {\n                    // If the oldest timestamp is not zero, it means the buffer was fully initialized.\n                    bufferLength = Buffer.SIZE;\n                } else {\n                    // If the buffer was not fully initialized, we haven't wrapped around it yet,\n                    // and can treat it as a regular array where the oldest index is the first one,\n                    // and the length the number of samples.\n                    bufferLength = oldestIndex; // Equal to latestIndex.next()\n                    oldestIndex = 0;\n                    oldestTimestamp = samples[0].timestamp();\n                }\n\n                // Finally check that the look up time is not previous to the oldest timestamp.\n                _require(oldestTimestamp <= lookUpTime, Errors.ORACLE_QUERY_TOO_OLD);\n            }\n\n            // Perform binary search to find nearest samples to the desired timestamp.\n            (bytes32 prev, bytes32 next) = findNearestSample(samples, lookUpTime, oldestIndex, bufferLength);\n\n            // `next`'s timestamp is guaranteed to be larger than `prev`'s, so we can skip checked arithmetic.\n            uint256 samplesTimeDiff = next.timestamp() - prev.timestamp();\n\n            if (samplesTimeDiff > 0) {\n                // We estimate the accumulator at the requested look up time by interpolating linearly between the\n                // previous and next accumulators.\n\n                // We can use unchecked arithmetic since the accumulators can be represented in 53 bits, and timestamps\n                // in 31 bits.\n                int256 samplesAccDiff = next.accumulator(variable) - prev.accumulator(variable);\n                uint256 elapsed = lookUpTime - prev.timestamp();\n                return prev.accumulator(variable) + ((samplesAccDiff * int256(elapsed)) / int256(samplesTimeDiff));\n            } else {\n                // Rarely, one of the samples will have the exact requested look up time, which is indicated by `prev`\n                // and `next` being the same. In this case, we simply return the accumulator at that point in time.\n                return prev.accumulator(variable);\n            }\n        }\n    }\n\n    /**\n     * @dev Finds the two samples with timestamps before and after `lookUpDate`. If one of the samples matches exactly,\n     * both `prev` and `next` will be it. `offset` is the index of the oldest sample in the buffer. `length` is the size\n     * of the samples list.\n     *\n     * Assumes `lookUpDate` is greater or equal than the timestamp of the oldest sample, and less or equal than the\n     * timestamp of the latest sample.\n     */\n    function findNearestSample(\n        mapping(uint256 => bytes32) storage samples,\n        uint256 lookUpDate,\n        uint256 offset,\n        uint256 length\n    ) public view returns (bytes32 prev, bytes32 next) {\n        // We're going to perform a binary search in the circular buffer, which requires it to be sorted. To achieve\n        // this, we offset all buffer accesses by `offset`, making the first element the oldest one.\n\n        // Auxiliary variables in a typical binary search: we will look at some value `mid` between `low` and `high`,\n        // periodically increasing `low` or decreasing `high` until we either find a match or determine the element is\n        // not in the array.\n        uint256 low = 0;\n        uint256 high = length - 1;\n        uint256 mid;\n\n        // If the search fails and no sample has a timestamp of `lookUpDate` (as is the most common scenario), `sample`\n        // will be either the sample with the largest timestamp smaller than `lookUpDate`, or the one with the smallest\n        // timestamp larger than `lookUpDate`.\n        bytes32 sample;\n        uint256 sampleTimestamp;\n\n        while (low <= high) {\n            // Mid is the floor of the average.\n            uint256 midWithoutOffset = (high + low) / 2;\n\n            // Recall that the buffer is not actually sorted: we need to apply the offset to access it in a sorted way.\n            mid = midWithoutOffset.add(offset);\n            sample = samples[mid];\n            sampleTimestamp = sample.timestamp();\n\n            if (sampleTimestamp < lookUpDate) {\n                // If the mid sample is bellow the look up date, then increase the low index to start from there.\n                low = midWithoutOffset + 1;\n            } else if (sampleTimestamp > lookUpDate) {\n                // If the mid sample is above the look up date, then decrease the high index to start from there.\n\n                // We can skip checked arithmetic: it is impossible for `high` to ever be 0, as a scenario where `low`\n                // equals 0 and `high` equals 1 would result in `low` increasing to 1 in the previous `if` clause.\n                high = midWithoutOffset - 1;\n            } else {\n                // sampleTimestamp == lookUpDate\n                // If we have an exact match, return the sample as both `prev` and `next`.\n                return (sample, sample);\n            }\n        }\n\n        // In case we reach here, it means we didn't find exactly the sample we where looking for.\n        return sampleTimestamp < lookUpDate ? (sample, samples[mid.next()]) : (samples[mid.prev()], sample);\n    }\n}\n", "sourceMap": "1379:9514:32:-:0;;;;;;;;;;;;;;;;;;;;;;;;;", "sourcePath": "node_modules/@balancer-labs/v2-pool-utils/contracts/oracle/QueryProcessor.sol", "type": "library", "deployment": {"address": "0x72D07D7DcA67b8A406aD1Ec34ce969c90bFEE768", "chainid": "137", "blockHeight": 31555985}}